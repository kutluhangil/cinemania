{"version":3,"file":"main-CCapyCKH.js","sources":["../../src/js/header.js","../../src/js/api/movies-api.js","../../src/js/weekly-trends.js","../../src/js/upcoming-this-month.js","../../src/js/pagination.js","../../src/js/catalog.js","../../src/js/loader.js","../../src/js/pop-up-movie-card.js","../../src/js/hero.js","../../src/js/my-library.js","../../src/js/pop-up-trailer-card.js","../../src/js/my-library-hero.js","../../src/js/footer.js","../../src/main.js"],"sourcesContent":["const THEME_KEY = 'cinemania-theme';\nconst THEME_DARK = 'dark';\nconst THEME_LIGHT = 'light';\n\nfunction applyTheme(theme) {\n  const body = document.body;\n\n  // always keep exactly one\n  body.classList.remove('dark-theme', 'light-theme');\n\n  if (theme === THEME_LIGHT) {\n    body.classList.add('light-theme');\n  } else {\n    body.classList.add('dark-theme');\n  }\n}\n\nfunction getSavedTheme() {\n  const saved = localStorage.getItem(THEME_KEY);\n  return saved === THEME_LIGHT ? THEME_LIGHT : THEME_DARK; // default dark\n}\n\nfunction saveTheme(theme) {\n  localStorage.setItem(THEME_KEY, theme);\n}\n\nfunction initThemeToggle() {\n  const toggleBtn = document.querySelector('.theme-toggle');\n  if (!toggleBtn) return;\n\n  // apply on load\n  applyTheme(getSavedTheme());\n\n  toggleBtn.addEventListener('click', () => {\n    const current = document.body.classList.contains('light-theme') ? THEME_LIGHT : THEME_DARK;\n    const next = current === THEME_LIGHT ? THEME_DARK : THEME_LIGHT;\n\n    applyTheme(next);\n    saveTheme(next);\n  });\n}\n\nfunction initMobileMenu() {\n  const burgerBtn = document.querySelector('.burger-btn');\n  const menuOverlay = document.querySelector('[data-menu]');\n\n  if (!burgerBtn || !menuOverlay) return;\n\n  const openMenu = () => menuOverlay.classList.remove('is-hidden');\n  const closeMenu = () => menuOverlay.classList.add('is-hidden');\n\n  burgerBtn.addEventListener('click', (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    // toggle\n    if (menuOverlay.classList.contains('is-hidden')) openMenu();\n    else closeMenu();\n  });\n\n  // close when clicking outside panel\n  menuOverlay.addEventListener('click', (e) => {\n    if (e.target === menuOverlay) closeMenu();\n  });\n\n  // close when clicking link\n  menuOverlay.addEventListener('click', (e) => {\n    const link = e.target.closest('.mobile-menu-link');\n    if (link) closeMenu();\n  });\n\n  // close on Esc\n  window.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape') closeMenu();\n  });\n}\n\nfunction initActiveNav() {\n  const path = window.location.pathname;\n  const current = path.split('/').pop() || 'index.html';\n\n  const links = document.querySelectorAll(\n    '.header-nav-link, .mobile-menu-link'\n  );\n  if (!links.length) return;\n\n  links.forEach(link => link.classList.remove('active'));\n\n  links.forEach(link => {\n    const href = link.getAttribute('href');\n    if (!href) return;\n    const hrefFile = href.split('/').pop();\n    if (hrefFile === current) link.classList.add('active');\n  });\n}\n\nexport function initHeader() {\n  initThemeToggle();\n  initMobileMenu();\n  initActiveNav();\n}\n","export const API_KEY = '6e2b9ceff6313b472d60eed2769db38a';\nexport const BASE_URL = 'https://api.themoviedb.org/3';\nexport const IMAGE_BASE = 'https://image.tmdb.org/t/p/w500';\n\nexport async function getWeeklyTrending() {\n  try {\n    const response = await fetch(\n      `${BASE_URL}/trending/movie/week?api_key=${API_KEY}`\n    );\n    if (!response.ok) throw new Error('Veri çekilemedi!');\n    const data = await response.json();\n    return data.results;\n  } catch (error) {\n    console.error('Hata:', error);\n    return [];\n  }\n}\n\n/**\n * Film adına göre arama yapar (Katalog sayfası için).\n * @param {string} query - Aranan film adı\n * @param {number} page - Sayfa numarası\n */\nexport async function searchMovies(query, page = 1) {\n  try {\n    const response = await fetch(\n      `${BASE_URL}/search/movie?api_key=${API_KEY}&query=${query}&page=${page}`\n    );\n    if (!response.ok) throw new Error('Arama yapılamadı!');\n    return await response.json();\n  } catch (error) {\n    console.error('Arama Hatası:', error);\n    return null;\n  }\n}\n\n/**\n * Filmin detaylı bilgilerini getirir (Modal veya detay sayfası için).\n */\nexport async function getMovieDetails(movieId) {\n  try {\n    const response = await fetch(\n      `${BASE_URL}/movie/${movieId}?api_key=${API_KEY}`\n    );\n    return await response.json();\n  } catch (error) {\n    console.error('Detay Hatası:', error);\n  }\n}\n\n/**\n * Günlük trend olan filmleri getirir.\n */\nexport async function getDailyTrending() {\n  try {\n    const response = await fetch(\n      `${BASE_URL}/trending/movie/day?api_key=${API_KEY}`\n    );\n    if (!response.ok) throw new Error('Veri çekilemedi!');\n    const data = await response.json();\n    return data.results;\n  } catch (error) {\n    console.error('Hata:', error);\n    return [];\n  }\n}\n","import { getWeeklyTrending } from './api/movies-api.js';\n\nconst movieGrid = document.getElementById('movie-grid');\n\nlet cachedMovies = [];\n\nfunction getVisibleCount() {\n  // Mobil: 1, Tablet+Desktop: 3\n  return window.matchMedia('(min-width: 768px)').matches ? 3 : 1;\n}\n\nfunction renderMovies() {\n  if (!movieGrid) return;\n  const count = getVisibleCount();\n  displayMovies(cachedMovies.slice(0, count));\n}\n\nexport async function initWeeklyTrends() {\n  if (!movieGrid) return;\n\n  try {\n    // API'den trend filmleri çekiyoruz\n    cachedMovies = await getWeeklyTrending();\n\n    if (cachedMovies && cachedMovies.length > 0) {\n      renderMovies();\n\n      // Ekran boyutu değişirse (resize/orientation change) yeniden çiz\n      window.addEventListener('resize', renderMovies);\n    }\n  } catch (error) {\n    console.error('Trend verileri yüklenirken hata oluştu:', error);\n  }\n}\n\nfunction displayMovies(movies) {\n  movieGrid.innerHTML = movies\n    .map(movie => {\n      // Film çıkış yılı bilgisini alıyoruz (Yoksa varsayılan 2023 yazıyoruz)\n      const releaseYear = movie.release_date\n        ? movie.release_date.split('-')[0]\n        : '2023';\n\n      // Önemli: CSS'deki .weekly-trends__info yapısına uygun HTML\n      const stars = renderStars(movie.vote_average);\n\n      return `\n        <div class=\"weekly-trends__item\" data-movie-id=\"${movie.id}\">\n            <div class=\"weekly-trends__card\">\n                <img src=\"https://image.tmdb.org/t/p/w500${movie.poster_path}\" alt=\"${movie.title}\" loading=\"lazy\">\n                \n                <div class=\"weekly-trends__info\">\n                    <div class=\"weekly-trends__text\">\n                        <div class=\"weekly-trends__movie-title\">${movie.title}</div>\n                        <div class=\"weekly-trends__movie-meta\">Drama, Action | ${releaseYear}</div>\n                    </div>\n                    <div class=\"weekly-trends__stars\" aria-label=\"Rating ${movie.vote_average?.toFixed ? movie.vote_average.toFixed(1) : 'N/A'}\">${stars}</div>\n                </div>\n            </div>\n        </div>\n    `;\n    })\n    .join('');\n}\n\nfunction renderStars(rating) {\n  const value = Number(rating);\n  if (!Number.isFinite(value)) return '';\n\n  const starCount = value / 2;\n  const fullStars = Math.floor(starCount);\n  const hasHalfStar = starCount % 1 >= 0.3;\n  const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);\n\n  let starsHTML = '';\n\n  for (let i = 0; i < fullStars; i++) {\n    starsHTML += '<span class=\"star-item star-filled\"></span>';\n  }\n\n  if (hasHalfStar) {\n    starsHTML += '<span class=\"star-item star-half\"></span>';\n  }\n\n  for (let i = 0; i < emptyStars; i++) {\n    starsHTML += '<span class=\"star-item star-empty\"></span>';\n  }\n\n  return starsHTML;\n}\n\n// Sayfa yüklendiğinde fonksiyonu çalıştır\ninitWeeklyTrends();\n\nif (movieGrid) {\n  movieGrid.addEventListener('click', e => {\n    const card = e.target.closest('.weekly-trends__item');\n    if (!card) return;\n\n    const movieId = card.dataset.movieId;\n    openPopupSafe(movieId);\n  });\n}\n\nfunction openPopupSafe(movieId) {\n  if (!movieId) return false;\n\n  if (typeof window.openMoviePopup === 'function') {\n    window.openMoviePopup(movieId);\n    return true;\n  }\n\n  console.warn(\n    'openMoviePopup bulunamadı. Popup modülü sayfaya yüklenmemiş olabilir.'\n  );\n  return false;\n}\n","const API_KEY = 'c43a3c633ad33367e1cd1eb02f47a173'; // Senin API keyin\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst IMG_URL = 'https://image.tmdb.org/t/p/original';\nconst LIB_KEY = 'my-library';\nconst LEGACY_LIB_KEY = 'myLibrary';\n\n// DOM Elementleri\nconst wrapper = document.getElementById('upcoming-wrapper');\n\n// Global Değişkenler\nlet genresMap = {}; // ID -> İsim eşleşmesi için\n\n// Başlangıç\n\nasync function initUpcoming() {\n  try {\n    // 1. Önce Türleri (Genres) Çek ve Haritala\n    await fetchGenres();\n    \n    // 2. Sonra Filmleri Çek\n    await fetchUpcomingMovie();\n  } catch (error) {\n    console.error('Hata:', error);\n    wrapper.innerHTML = '<p>Film bilgileri yüklenemedi.</p>';\n  }\n}\n\nexport function initUpcomingThisMonth() {\n  if (!wrapper) return;\n  return initUpcoming();\n}\n\n// Tür Listesini Getir\nasync function fetchGenres() {\n  const res = await fetch(`${BASE_URL}/genre/movie/list?api_key=${API_KEY}`);\n  const data = await res.json();\n  data.genres.forEach(g => {\n    genresMap[g.id] = g.name;\n  });\n}\n\n// Upcoming Filmleri Getir ve Rastgele Birini Seç\nasync function fetchUpcomingMovie() {\n  // Bu ayın başlangıcı\n  const date = new Date();\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const startOfMonth = `${year}-${month}-01`;\n\n  // API İsteği\n  const res = await fetch(\n    `${BASE_URL}/discover/movie?api_key=${API_KEY}&primary_release_date.gte=${startOfMonth}&sort_by=popularity.desc&include_adult=false&include_video=false`\n  );\n  const data = await res.json();\n  const movies = data.results;\n\n  if (movies.length > 0) {\n    // Rastgele bir film seç (Sayfa yenilendikçe değişir)\n    const randomIndex = Math.floor(Math.random() * movies.length);\n    renderMovie(movies[randomIndex]);\n  } else {\n    wrapper.innerHTML = '<p>Bu ay için vizyon filmi bulunamadı.</p>';\n  }\n}\n\n// Filmi Ekrana Bas (Figma Layout)\nfunction renderMovie(movie) {\n  // Tür ID'lerini İsimlere Çevir (En fazla 2 tane göster)\n  const genreNames = movie.genre_ids\n    .slice(0, 2)\n    .map(id => genresMap[id])\n    .join(', ');\n\n  // Tarih Formatı (DD.MM.YYYY)\n  const releaseDate = new Date(movie.release_date).toLocaleDateString('tr-TR');\n\n  // Kütüphanede var mı?\n  const isSaved = isInLibrary(movie.id);\n\n  // HTML Şablonu\n  const html = `\n    <div class=\"upcoming-poster-container\" id=\"posterClick\">\n      <img src=\"${IMG_URL}${movie.backdrop_path || movie.poster_path}\" alt=\"${movie.title}\">\n    </div>\n\n    <div class=\"upcoming-info-container\">\n      <h3 class=\"upcoming-movie-title\" id=\"titleClick\">${movie.title}</h3>\n      \n      <div class=\"upcoming-meta-grid\">\n        <span class=\"meta-label\">Release date</span>\n        <span class=\"meta-value highlight-date\">${releaseDate}</span>\n\n        <span class=\"meta-label\">Vote / Votes</span>\n        <span class=\"meta-value\">\n          <span class=\"vote-badge\">${movie.vote_average.toFixed(1)}</span> / <span class=\"vote-count\">${movie.vote_count}</span>\n        </span>\n\n        <span class=\"meta-label\">Popularity</span>\n        <span class=\"meta-value\">${movie.popularity.toFixed(1)}</span>\n\n        <span class=\"meta-label\">Genre</span>\n        <span class=\"meta-value\">${genreNames}</span>\n      </div>\n\n      <div class=\"upcoming-about\">\n        <h4 class=\"upcoming-about-title\">ABOUT</h4>\n        <p class=\"upcoming-overview\">${movie.overview}</p>\n      </div>\n\n      <button class=\"btn-library ${isSaved ? 'remove' : 'add'}\" id=\"libraryBtn\">\n        ${isSaved ? 'Remove from my library' : 'Add to my library'}\n      </button>\n    </div>\n  `;\n\n  wrapper.innerHTML = html;\n\n  // Event Listeners (Tıklama olayları)\n  document.getElementById('posterClick').addEventListener('click', () => {\n    openPopupSafe(movie.id);\n  });\n  document.getElementById('titleClick').addEventListener('click', () => {\n    openPopupSafe(movie.id);\n  });\n  \n  const btn = document.getElementById('libraryBtn');\n  btn.addEventListener('click', () => {\n    toggleLibrary(movie);\n    // Butonu anlık güncelle (Sayfayı yenilemeye gerek yok)\n    const newState = isInLibrary(movie.id);\n    updateButtonState(btn, newState);\n  });\n}\n\n// Buton Görünümünü Güncelle\nfunction updateButtonState(btn, isSaved) {\n  if (isSaved) {\n    btn.textContent = 'Remove from my library';\n    btn.classList.remove('add');\n    btn.classList.add('remove');\n  } else {\n    btn.textContent = 'Add to my library';\n    btn.classList.remove('remove');\n    btn.classList.add('add');\n  }\n}\n\n/* ===== KÜTÜPHANE MANTIĞI (Local Storage) ===== */\nfunction getLibrary() {\n  const current = JSON.parse(localStorage.getItem(LIB_KEY)) || [];\n  if (current.length > 0) return current;\n\n  // Migrate legacy storage if present\n  const legacy = JSON.parse(localStorage.getItem(LEGACY_LIB_KEY)) || [];\n  if (legacy.length > 0) {\n    localStorage.setItem(LIB_KEY, JSON.stringify(legacy));\n    localStorage.removeItem(LEGACY_LIB_KEY);\n  }\n  return legacy;\n}\n\nfunction isInLibrary(id) {\n  return getLibrary().some(m => m.id === id);\n}\n\nfunction toggleLibrary(movie) {\n  let lib = getLibrary();\n  if (isInLibrary(movie.id)) {\n    lib = lib.filter(m => m.id !== movie.id);\n  } else {\n    lib.push(movie);\n  }\n  localStorage.setItem(LIB_KEY, JSON.stringify(lib));\n}\n\nfunction openPopupSafe(movieId) {\n  if (!movieId) return false;\n\n  if (typeof window.openMoviePopup === 'function') {\n    window.openMoviePopup(movieId);\n    return true;\n  }\n\n  console.warn(\n    'openMoviePopup bulunamadı. Popup modülü sayfaya yüklenmemiş olabilir.'\n  );\n  return false;\n}\n","export function initPagination(rootSelector, onPageChange) {\n  const root = document.querySelector(rootSelector);\n  if (!root) throw new Error(`Pagination root not found: ${rootSelector}`);\n\n  const prevBtn = root.querySelector('.page-btn.prev');\n  const nextBtn = root.querySelector('.page-btn.next');\n  const numbersEl = root.querySelector('.page-numbers');\n\n  let page = 1;\n  let totalPages = 0;\n\n  function show() {\n    root.classList.add('is-visible');\n  }\n\n  function hide() {\n    root.classList.remove('is-visible');\n    numbersEl.innerHTML = '';\n  }\n\n  function setNavButtons() {\n    prevBtn.disabled = page <= 1;\n    nextBtn.disabled = page >= totalPages || totalPages === 0;\n  }\n\n  function formatPageNumber(num) {\n    return num < 10 ? `0${num}` : `${num}`;\n  }\n\n  function clamp(n, min, max) {\n    return Math.min(max, Math.max(min, n));\n  }\n\n  function uniqClean(model, total) {\n    const cleaned = [];\n\n    for (const item of model) {\n      const last = cleaned[cleaned.length - 1];\n\n      if (item === '...' && last === '...') continue;\n      if (typeof item === 'number' && item === last) continue;\n\n      cleaned.push(item);\n    }\n\n    if (cleaned[0] !== 1) cleaned.unshift(1);\n    if (cleaned[cleaned.length - 1] !== total) cleaned.push(total);\n\n    const final = [];\n    for (let i = 0; i < cleaned.length; i += 1) {\n      const cur = cleaned[i];\n      const prev = final[final.length - 1];\n      const next = cleaned[i + 1];\n\n      if (\n        cur === '...' &&\n        typeof prev === 'number' &&\n        typeof next === 'number'\n      ) {\n        if (next - prev === 2) {\n          final.push(prev + 1);\n          continue;\n        }\n        if (next - prev <= 1) continue;\n      }\n\n      final.push(cur);\n    }\n\n    return final;\n  }\n\n  function buildModel(current, total) {\n    const cur = clamp(current, 1, total);\n\n    if (total <= 7) {\n      return Array.from({ length: total }, (_, i) => i + 1);\n    }\n\n    if (cur <= 2) {\n      return uniqClean([1, 2, 3, '...', total], total);\n    }\n\n    if (cur >= total - 1) {\n      return uniqClean([1, '...', total - 2, total - 1, total], total);\n    }\n\n    return uniqClean([1, '...', cur - 1, cur, cur + 1, '...', total], total);\n  }\n\n  function render() {\n    if (totalPages <= 1) {\n      hide();\n      return;\n    }\n\n    show();\n    setNavButtons();\n\n    const model = buildModel(page, totalPages);\n\n    numbersEl.innerHTML = model\n      .map(item => {\n        if (item === '...') return `<span class=\"ellipsis\">…</span>`;\n\n        const active = item === page ? 'is-active' : '';\n        return `\n          <button class=\"page-number ${active}\" type=\"button\" data-page=\"${item}\">\n            ${formatPageNumber(item)}\n          </button>\n        `;\n      })\n      .join('');\n  }\n\n  prevBtn.addEventListener('click', () => {\n    if (page <= 1) return;\n    page -= 1;\n    onPageChange(page);\n  });\n\n  nextBtn.addEventListener('click', () => {\n    if (page >= totalPages) return;\n    page += 1;\n    onPageChange(page);\n  });\n\n  numbersEl.addEventListener('click', e => {\n    const btn = e.target.closest('button[data-page]');\n    if (!btn) return;\n\n    const next = Number(btn.dataset.page);\n    if (!Number.isFinite(next) || next === page) return;\n\n    page = next;\n    onPageChange(page);\n  });\n\n  return {\n    set(total, current = 1) {\n      totalPages = Number(total) || 0;\n      page = clamp(Number(current) || 1, 1, Math.max(1, totalPages));\n      render();\n    },\n    reset() {\n      page = 1;\n      totalPages = 0;\n      hide();\n    },\n    getPage() {\n      return page;\n    },\n  };\n}\n","import { API_KEY, BASE_URL, IMAGE_BASE } from './api/movies-api.js';\nimport { initPagination } from './pagination.js';\n\nexport function initCatalog() {\n  // ======================\n  // STATE\n  // ======================\n  let selectedYearValue = '';\n  let currentQuery = '';\n  let hasSearched = false;\n  let genreMap = {};\n\n  let currentPage = 1;\n  let currentMode = 'trending';\n\n  // ======================\n  // DOM\n  // ======================\n  const moviesContainer = document.getElementById('moviesContainer');\n  const emptyMessage = document.getElementById('emptyMessage');\n  const paginationRoot = document.querySelector('.pagination');\n\n  if (!moviesContainer || !emptyMessage) return;\n\n  const pagination = paginationRoot\n    ? initPagination('.pagination', page => {\n        if (currentMode === 'search') searchMovies(page);\n        else fetchTrending(page);\n      })\n    : null;\n\n  const filmInput = document.querySelector('.search-input'); // ilk .search-input (Film inputu)\n  const clearBtn = document.getElementById('clearSearch'); // HTML'de yok → aşağıda fallback var\n  const searchBtn = document.querySelector('.search-btn');\n\n  const yearBtn = document.getElementById('yearBtn');\n  const yearDropdown = document.getElementById('yearDropdown');\n  const selectedYear = document.getElementById('selectedYear');\n\n  // ======================\n  // SCROLL RESTORE\n  // ======================\n  if (sessionStorage.getItem('scrollCatalog') === 'true') {\n    sessionStorage.removeItem('scrollCatalog');\n\n    setTimeout(() => {\n      const searchRow = document.querySelector('.search-row');\n      if (!searchRow) return;\n\n      const y = searchRow.getBoundingClientRect().top + window.scrollY - 20;\n      window.scrollTo({ top: y, behavior: 'smooth' });\n    }, 300);\n  }\n\n  // ======================\n  // Clear button (x) setup\n  // ======================\n  const input = document.querySelector('.search-input');\n  if (!input) return;\n\n  const parent = input.parentElement;\n  if (!parent) return;\n\n  const clearInputBtn = parent.querySelector('.search-clear-btn');\n  if (clearInputBtn) clearInputBtn.style.display = 'none';\n\n  // clearBtn id ile bulunamazsa class'tan yakala (HTML'e dokunmadan)\n  const clearBtnSafe = clearBtn || clearInputBtn;\n\n  // ======================\n  // PAGINATION (ŞİMDİLİK NO-OP)\n  // Not: setupPagination yorumdaydı ama çağrılıyordu, hata vermesin diye burada boş bırakıldı.\n  // ======================\n  function setupPagination(totalPages, page) {\n    if (!pagination) return;\n    const pages = Math.min(500, Number(totalPages) || 0);\n    if (pages <= 1) {\n      pagination.reset();\n      return;\n    }\n    pagination.set(pages, page);\n  }\n\n  // ======================\n  // GENRES\n  // ======================\n  fetch(`${BASE_URL}/genre/movie/list?api_key=${API_KEY}&language=en-US`)\n    .then(r => r.json())\n    .then(d => {\n      (d.genres || []).forEach(g => (genreMap[g.id] = g.name));\n    })\n    .catch(err => console.error('genre list error:', err));\n\n  // ======================\n  // CLEAR (x) EVENTS\n  // ======================\n  parent.addEventListener('click', e => {\n    const btn = e.target.closest('.search-clear-btn');\n    if (!btn) return;\n\n    input.value = '';\n    input.focus();\n    btn.style.display = 'none';\n\n    // sadece input temizlemek istiyorsan burası yeter\n    // full reset istiyorsan aşağıdaki gibi de yapabilirsin (şimdilik dokunmadım)\n  });\n\n  parent.addEventListener('input', e => {\n    if (e.target !== input) return;\n    const btn = parent.querySelector('.search-clear-btn');\n    if (btn) btn.style.display = input.value ? 'block' : 'none';\n  });\n\n  if (clearInputBtn) {\n    clearInputBtn.addEventListener('click', () => {\n      filmInput.value = '';\n      filmInput.focus();\n      clearInputBtn.style.display = 'none';\n    });\n  }\n\n  // ======================\n  // YEAR DROPDOWN\n  // ======================\n  function setDropdownOpen(isOpen) {\n    if (!yearDropdown || !yearBtn) return;\n\n    yearDropdown.classList.toggle('open', isOpen);\n    yearBtn.classList.toggle('open', isOpen);\n\n    // CSS'te scaleY(1) yok; HTML/CSS'e dokunmadan inline ile çözüyoruz\n    yearDropdown.style.transform = isOpen ? 'scaleY(1)' : 'scaleY(0)';\n    yearDropdown.style.opacity = isOpen ? '1' : '0';\n    yearDropdown.style.pointerEvents = isOpen ? 'auto' : 'none';\n\n    const chevron = yearBtn.querySelector('.icon-chevron');\n    if (chevron)\n      chevron.style.transform = isOpen ? 'rotate(180deg)' : 'rotate(0deg)';\n  }\n\n  if (yearBtn && yearDropdown) {\n    yearBtn.addEventListener('click', e => {\n      e.stopPropagation();\n      const isOpen = !yearDropdown.classList.contains('open');\n      setDropdownOpen(isOpen);\n    });\n\n    yearDropdown.addEventListener('click', e => {\n      e.stopPropagation();\n      if (e.target.tagName === 'LI') {\n        selectedYearValue = e.target.dataset.year || '';\n        selectedYear.textContent = e.target.textContent;\n\n        setDropdownOpen(false);\n      }\n    });\n  }\n\n  document.addEventListener('click', e => {\n    if (!yearDropdown || !yearBtn) return;\n    if (!yearDropdown.classList.contains('open')) return;\n\n    if (!yearDropdown.contains(e.target) && !yearBtn.contains(e.target)) {\n      setDropdownOpen(false);\n    }\n  });\n\n  // ======================\n  // SEARCH\n  // ======================\n  if (searchBtn) {\n    searchBtn.addEventListener('click', () => {\n      currentQuery = filmInput.value.trim();\n      hasSearched = true;\n      currentPage = 1;\n\n      if (!currentQuery && !selectedYearValue) {\n        hasSearched = false;\n        fetchTrending(1);\n        return;\n      }\n\n      searchMovies(1);\n    });\n  }\n\n  // ======================\n  // FULL CLEAR (opsiyonel buton)\n  // Not: HTML'de clearSearch id yok, o yüzden clearBtnSafe kullanılıyor\n  // ======================\n  if (clearBtnSafe) {\n    clearBtnSafe.addEventListener('click', function () {\n      filmInput.value = '';\n      if (clearInputBtn) clearInputBtn.style.display = 'none';\n\n      if (selectedYear) selectedYear.textContent = 'Year';\n\n      currentQuery = '';\n      selectedYearValue = '';\n      hasSearched = false;\n      currentPage = 1;\n\n      fetchTrending(1);\n    });\n  }\n\n  // ======================\n  // SEARCH LOGIC\n  // ======================\n  function searchMovies(page = 1) {\n    let url = '';\n\n    currentMode = 'search';\n    currentPage = page;\n\n    if (currentQuery) {\n      url = `${BASE_URL}/search/movie?api_key=${API_KEY}&query=${encodeURIComponent(\n        currentQuery\n      )}&page=${page}`;\n\n      if (selectedYearValue) {\n        url += `&year=${selectedYearValue}`;\n      }\n    } else {\n      // sadece yıl seçildi ama arama yoksa discover ile filtrele\n      url = `${BASE_URL}/discover/movie?api_key=${API_KEY}&page=${page}`;\n\n      if (selectedYearValue) {\n        url += `&primary_release_year=${selectedYearValue}`;\n      }\n    }\n\n    fetch(url)\n      .then(r => r.json())\n      .then(d => {\n        const maxPages = Math.min(500, Number(d.total_pages) || 0);\n        if (maxPages && page > maxPages) {\n          searchMovies(maxPages);\n          return;\n        }\n\n        renderMovies(d.results || []);\n        setupPagination(d.total_pages || 0, page);\n      })\n      .catch(err => console.error('searchMovies error:', err));\n  }\n\n  // ======================\n  // TRENDING\n  // ======================\n  fetchTrending(1);\n\n  function fetchTrending(page = 1) {\n    emptyMessage.style.display = 'none';\n    currentMode = 'trending';\n    currentPage = page;\n\n    fetch(`${BASE_URL}/trending/movie/week?api_key=${API_KEY}&page=${page}`)\n      .then(r => r.json())\n      .then(d => {\n        const maxPages = Math.min(500, Number(d.total_pages) || 0);\n        if (maxPages && page > maxPages) {\n          fetchTrending(maxPages);\n          return;\n        }\n\n        renderMovies(d.results || []);\n        setupPagination(d.total_pages || 0, page);\n      })\n      .catch(err => console.error('fetchTrending error:', err));\n  }\n\n  // ======================\n  // RENDER\n  // ======================\n  function renderMovies(movies) {\n    moviesContainer.innerHTML = '';\n\n    if (!movies.length) {\n      emptyMessage.style.display = hasSearched ? 'block' : 'none';\n      if (pagination) pagination.reset();\n      return;\n    }\n\n    emptyMessage.style.display = 'none';\n\n    movies.slice(0, 20).forEach(movie => {\n      const card = document.createElement('a');\n      card.className = 'movie-card';\n      card.setAttribute('data-id', movie.id);\n      card.setAttribute('data-movie-id', movie.id);\n      card.href = `catalog.html?id=${movie.id}`;\n\n      const poster = movie.poster_path\n        ? `${IMAGE_BASE}${movie.poster_path}`\n        : 'https://placehold.co/600x400';\n\n      const year = movie.release_date?.slice(0, 4) || 'N/A';\n      const genres =\n        movie.genre_ids\n          ?.map(id => genreMap[id])\n          .filter(Boolean)\n          .slice(0, 2)\n          .join(', ') || 'Unknown';\n\n      card.innerHTML = `\n        <img src=\"${poster}\" alt=\"${movie.title || 'Movie'}\">\n        <div class=\"movie-card-overlay\">\n          <div class=\"movie-card-text\">\n            <h3>${movie.title || 'Untitled'}</h3>\n            <div class=\"movie-meta\">\n              <span class=\"movie-genre\">${genres}</span>\n              <span class=\"movie-year\">| ${year}</span>\n            </div>\n          </div>\n          <div class=\"movie-rating-stars\"></div>\n        </div>\n      `;\n\n      card.addEventListener('click', e => {\n        e.preventDefault(); // linke gitmeyi engelle\n        e.stopPropagation();\n\n        const movieId = card.dataset.movieId; // data-movie-id'den gelir\n        openPopupSafe(movieId);\n      });\n\n      moviesContainer.appendChild(card);\n\n      renderStarsToRating(\n        card.querySelector('.movie-rating-stars'),\n        movie.vote_average\n      );\n    });\n  }\n}\n\nfunction renderStarsToRating(el, rating) {\n  if (!el) return;\n  el.innerHTML = '';\n\n  const fullStars = Math.floor(rating / 2);\n  const hasHalfStar = rating % 2 >= 1;\n\n  for (let i = 0; i < 5; i++) {\n    let fillType = 'empty';\n    if (i < fullStars) fillType = 'full';\n    else if (i === fullStars && hasHalfStar) fillType = 'half';\n\n    const gid = `star-${Math.random().toString(36).slice(2)}`;\n\n    el.innerHTML += `\n        <svg viewBox=\"0 0 32 32\" width=\"14\" height=\"14\">\n        <defs>\n          <linearGradient id=\"${gid}-full\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n            <stop offset=\"0%\" stop-color=\"#F84119\"/>\n            <stop offset=\"100%\" stop-color=\"#F89F19\"/>\n          </linearGradient>\n          <linearGradient id=\"${gid}-half\" x1=\"0\" y1=\"0\" x2=\"1\" y2=\"0\">\n            <stop offset=\"0%\" stop-color=\"#F84119\"/>\n            <stop offset=\"50%\" stop-color=\"#F89F19\"/>\n            <stop offset=\"50%\" stop-color=\"#bfbfbf\"/>\n            <stop offset=\"100%\" stop-color=\"#bfbfbf\"/>\n          </linearGradient>\n        </defs>\n        <path\n          d=\"M24.622 30L16 24.173 7.378 30l3.135-9.286L2.388 15.14h10.024L16 5.827l3.588 9.313h10.024l-8.125 5.569z\"\n          fill=\"${\n            fillType === 'full'\n              ? `url(#${gid}-full)`\n              : fillType === 'half'\n                ? `url(#${gid}-half)`\n                : '#bfbfbf'\n          }\"\n        />\n      </svg>\n        `;\n  }\n}\n\n// ======================\n// POPUP HOOK (safe)\n// ======================\n\nconst openPopupSafe = movieId => {\n  // popup global olarak window'a eklenmiş olabilir\n  if (typeof window.openMoviePopup === 'function') {\n    window.openMoviePopup(movieId);\n    return true;\n  }\n\n  // popup export ile gelirse (opsiyonel)\n  if (typeof openMoviePopup === 'function') {\n    openMoviePopup(movieId);\n    return true;\n  }\n\n  console.warn(\n    'openMoviePopup bulunamadı. Popup modülü sayfaya yüklenmemiş olabilir.'\n  );\n  return false;\n};\n","export function createLoader(text = 'Loading...') {\n  const wrapper = document.createElement('div');\n  wrapper.className = 'app-loader';\n  wrapper.setAttribute('role', 'status');\n  wrapper.setAttribute('aria-live', 'polite');\n\n  const spinner = document.createElement('div');\n  spinner.className = 'app-loader__spinner';\n  spinner.setAttribute('aria-hidden', 'true');\n\n  const label = document.createElement('span');\n  label.className = 'app-loader__text';\n  label.textContent = text;\n\n  wrapper.appendChild(spinner);\n  wrapper.appendChild(label);\n\n  return wrapper;\n}\n\nexport function mountLoader(target, text) {\n  const el =\n    typeof target === 'string' ? document.querySelector(target) : target;\n  if (!el) return null;\n  const loader = createLoader(text);\n  el.innerHTML = '';\n  el.appendChild(loader);\n  return loader;\n}\n\nexport function removeLoader(target) {\n  const el =\n    typeof target === 'string' ? document.querySelector(target) : target;\n  if (!el) return;\n  const loader = el.querySelector('.app-loader');\n  if (loader) loader.remove();\n}\n\nexport async function withLoader(target, action, text) {\n  const loader = mountLoader(target, text);\n  try {\n    return await action();\n  } finally {\n    if (loader) loader.remove();\n  }\n}\n","import { getMovieDetails } from './api/movies-api.js';\n\nconst LIBRARY_KEY = 'my-library';\n\nlet loader;\nlet overlay;\nlet closeBtn;\nlet libraryBtn;\n\nlet posterImg;\nlet titleEl;\nlet infoValues;\nlet descriptionEl;\n\nfunction initPopup() {\n  overlay = document.querySelector('.popup-modal-overlay');\n  loader = document.querySelector('.popup-loader');\n  closeBtn = document.querySelector('.popup-modal-close');\n  libraryBtn = document.querySelector('.popup-add-library-btn');\n\n  posterImg = document.querySelector('.popup-movie-poster img');\n  titleEl = document.querySelector('.popup-movie-title');\n  infoValues = document.querySelectorAll('.popup-movie-info .popup-value');\n  descriptionEl = document.querySelector('.popup-movie-description');\n\n  if (!overlay) return;\n\n  if (closeBtn) {\n    closeBtn.addEventListener('click', closeMoviePopup);\n  }\n\n  overlay.addEventListener('click', e => {\n    if (e.target === overlay) closeMoviePopup();\n  });\n\n  document.addEventListener('keydown', e => {\n    if (e.key === 'Escape' && overlay.classList.contains('is-active')) {\n      closeMoviePopup();\n    }\n  });\n}\n\nasync function openMoviePopup(movieId) {\n  if (!overlay || !loader) return;\n\n  overlay.classList.add('is-active');\n  loader.classList.remove('is-hidden');\n\n  try {\n    const movie = await getMovieDetails(movieId);\n\n    if (posterImg) {\n      posterImg.src = movie.poster_path\n        ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`\n        : '';\n    }\n\n    if (titleEl) {\n      titleEl.textContent = movie.title || 'Unknown title';\n    }\n\n    if (infoValues.length >= 3) {\n      if (movie.vote_average) {\n        const voteAvg = movie.vote_average.toFixed(1);\n        const voteCount = movie.vote_count ?? 0;\n        infoValues[0].innerHTML = `\n          <span class=\"popup-pill\">${voteAvg}</span>\n          <span class=\"popup-pill-sep\">/</span>\n          <span class=\"popup-pill\">${voteCount}</span>\n        `;\n      } else {\n        infoValues[0].textContent = 'N/A';\n      }\n\n      infoValues[1].textContent = movie.popularity\n        ? movie.popularity.toFixed(1)\n        : 'N/A';\n\n      infoValues[2].textContent = movie.genres?.length\n        ? movie.genres.map(g => g.name).join(', ')\n        : 'Unknown';\n    }\n\n    if (descriptionEl) {\n      descriptionEl.textContent = movie.overview || 'No description available.';\n    }\n\n    if (libraryBtn) {\n      const inLibrary = isInLibrary(movie.id);\n      libraryBtn.textContent = inLibrary\n        ? 'Remove from my library'\n        : 'Add to my library';\n      libraryBtn.classList.toggle('is-remove', inLibrary);\n\n      libraryBtn.onclick = () => toggleLibrary(movie);\n    }\n  } catch (error) {\n    console.error('Movie details error:', error);\n  } finally {\n    loader.classList.add('is-hidden');\n  }\n}\n\nfunction closeMoviePopup() {\n  if (overlay) overlay.classList.remove('is-active');\n}\n\nfunction getLibrary() {\n  return JSON.parse(localStorage.getItem(LIBRARY_KEY)) || [];\n}\n\nfunction isInLibrary(id) {\n  return getLibrary().some(movie => movie.id === id);\n}\n\nfunction toggleLibrary(movie) {\n  if (!libraryBtn) return;\n\n  let library = getLibrary();\n\n  if (isInLibrary(movie.id)) {\n    library = library.filter(item => item.id !== movie.id);\n    libraryBtn.textContent = 'Add to my library';\n    libraryBtn.classList.remove('is-remove');\n  } else {\n    library.push(movie);\n    libraryBtn.textContent = 'Remove from my library';\n    libraryBtn.classList.add('is-remove');\n  }\n\n  localStorage.setItem(LIBRARY_KEY, JSON.stringify(library));\n}\n\ndocument.addEventListener('DOMContentLoaded', initPopup);\n\n// Expose for catalog.js safe hook\nif (typeof window !== 'undefined') {\n  window.openMoviePopup = openMoviePopup;\n}\n\nexport { openMoviePopup, openMoviePopup as renderMoviePopup };\n","import { API_KEY, BASE_URL } from './api/movies-api.js';\nimport { createLoader } from './loader.js';\nimport { getDailyTrending } from './api/movies-api.js';\nimport { openMoviePopup } from './pop-up-movie-card.js';\nconst IMAGE_URL = 'https://image.tmdb.org/t/p/original';\n\n// Yardımcı fonksiyon: Elementin varlığını kontrol eder\nconst getEl = id => document.getElementById(id);\n\nexport async function initHero() {\n  showHeroLoader();\n  try {\n    const results = await getDailyTrending();\n    if (results && results.length > 0) {\n      const randomMovie =\n        results[Math.floor(Math.random() * results.length)];\n      displayMovie(randomMovie);\n    } else {\n      displayDefaultHero();\n    }\n  } catch (error) {\n    displayDefaultHero();\n  } finally {\n    removeHeroLoader();\n  }\n}\n\nfunction displayMovie(movie) {\n  const heroSection = getEl('hero');\n  const title = getEl('hero-title');\n  const desc = getEl('hero-description');\n  const trailerBtn = getEl('watch-trailer');\n  const detailsBtn = getEl('more-details');\n  const ratingContainer = getEl('hero-rating');\n\n  if (heroSection) {\n    heroSection.classList.remove('hero-default');\n    heroSection.style.backgroundImage = `url(${IMAGE_URL}${movie.backdrop_path})`;\n  }\n  if (title) title.innerText = movie.title;\n  if (desc) desc.innerText = movie.overview.slice(0, 150) + '...';\n\n  if (trailerBtn) {\n    trailerBtn.onclick = () => getTrailer(movie.id);\n  }\n\n  if (detailsBtn) {\n    detailsBtn.onclick = () => {\n      if (typeof openMoviePopup === 'function') {\n        openMoviePopup(movie.id);\n      } else if (\n        typeof window !== 'undefined' &&\n        typeof window.openMoviePopup === 'function'\n      ) {\n        window.openMoviePopup(movie.id);\n      } else {\n        console.log('Details modal is not ready.');\n      }\n    };\n  }\n\n  if (ratingContainer) {\n    ratingContainer.innerHTML = renderHeroStars(movie.vote_average);\n  }\n}\n\nfunction renderHeroStars(rating) {\n  const value = Number(rating);\n  if (!Number.isFinite(value)) return '';\n\n  const starCount = value / 2;\n  const fullStars = Math.floor(starCount);\n  const hasHalfStar = starCount % 1 >= 0.3;\n  const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);\n\n  let starsHTML = '';\n\n  for (let i = 0; i < fullStars; i++) {\n    starsHTML += '<span class=\"star-item star-filled\"></span>';\n  }\n\n  if (hasHalfStar) {\n    starsHTML += '<span class=\"star-item star-half\"></span>';\n  }\n\n  for (let i = 0; i < emptyStars; i++) {\n    starsHTML += '<span class=\"star-item star-empty\"></span>';\n  }\n\n  return starsHTML;\n}\n\nasync function getTrailer(movieId) {\n  try {\n    const response = await fetch(\n      `${BASE_URL}/movie/${movieId}/videos?api_key=${API_KEY}&language=en-US`\n    );\n    const data = await response.json();\n    const trailer = data.results.find(\n      v => v.type === 'Trailer' && v.site === 'YouTube'\n    );\n\n    if (trailer) {\n      openVideoModal(trailer.key);\n    } else {\n      showErrorPopup();\n    }\n  } catch (error) {\n    console.error('Fragman yüklenirken hata oluştu:', error);\n    showErrorPopup();\n  }\n}\n\nfunction showErrorPopup() {\n  const errorPopup = getEl('error-popup');\n  if (errorPopup) errorPopup.classList.add('show');\n}\n\nexport function openVideoModal(videoKey) {\n  const modal = getEl('video-modal');\n  const iframe = getEl('trailer-video');\n\n  if (modal && iframe) {\n    iframe.src = `https://www.youtube.com/embed/${videoKey}?autoplay=1`;\n    modal.classList.add('show');\n  }\n}\n\n// Olay dinleyicilerini güvenli bir şekilde başlatan fonksiyon\nfunction setupEventListeners() {\n  const videoModal = getEl('video-modal');\n  const errorModal = getEl('error-popup');\n  const videoIframe = getEl('trailer-video');\n\n  const closeVideoBtn = document.querySelector('.close-video');\n  if (closeVideoBtn && videoModal && videoIframe) {\n    closeVideoBtn.onclick = () => {\n      videoModal.classList.remove('show');\n      videoIframe.src = '';\n    };\n  }\n\n  const closeErrorBtn = document.querySelector('#error-popup .close-btn');\n  if (closeErrorBtn && errorModal) {\n    closeErrorBtn.onclick = () => {\n      errorModal.classList.remove('show');\n    };\n  }\n\n  document.addEventListener('keydown', event => {\n    if (event.key === 'Escape') {\n      if (videoModal && videoIframe) {\n        videoModal.classList.remove('show');\n        videoIframe.src = '';\n      }\n      if (errorModal) {\n        errorModal.classList.remove('show');\n      }\n    }\n  });\n\n  window.onclick = event => {\n    if (event.target === videoModal) {\n      videoModal.classList.remove('show');\n      videoIframe.src = '';\n    }\n    if (event.target === errorModal) {\n      errorModal.classList.remove('show');\n    }\n  };\n}\n\nfunction displayDefaultHero() {\n  const heroSection = getEl('hero');\n  const title = getEl('hero-title');\n  const desc = getEl('hero-description');\n  const ratingContainer = getEl('hero-rating');\n  const buttonsContainer = document.querySelector('.hero-buttons');\n\n  if (heroSection) {\n    heroSection.classList.add('hero-default');\n    heroSection.style.backgroundImage = 'url(/src/assets/default-cover.png)';\n  }\n\n  if (title) title.innerText = \"Let's Make Your Own Cinema\";\n\n  if (desc) {\n    desc.innerText =\n      \"Is a guide to creating a personalized movie theater experience. You'll need a projector, screen, and speakers. Decorate your space, choose your films, and stock up on snacks for the full experience.\";\n  }\n\n  if (ratingContainer) {\n    ratingContainer.innerHTML = '';\n  }\n\n  if (buttonsContainer) {\n    buttonsContainer.innerHTML =\n      '<a class=\"btn btn-orange\" href=\"/catalog.html\">Get Started</a>';\n  }\n}\n\nfunction showHeroLoader() {\n  const heroContent = document.querySelector('.hero-content');\n  if (!heroContent) return;\n  if (heroContent.querySelector('.app-loader')) return;\n  const loader = createLoader('Loading...');\n  loader.id = 'hero-loader';\n  heroContent.prepend(loader);\n}\n\nfunction removeHeroLoader() {\n  const loader = document.getElementById('hero-loader');\n  if (loader) loader.remove();\n}\n\nexport async function startHeroApp() {\n  setupEventListeners();\n  await initHero();\n}\n","/* ======================================================\n   DOM ELEMENT REFERENCES\n   Sayfa üzerindeki gerekli HTML elementlerini seçiyoruz\n====================================================== */\n\nconst listEl = document.querySelector('.library-list');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst emptyBox = document.querySelector('.library-empty');\nconst controlsBox = document.querySelector('.library-controls');\n\nconst genreBtn = document.getElementById('genreBtn');\nconst genreMenu = document.getElementById('genreMenu');\nconst genreText = document.getElementById('genreText');\n\nconst loaderBox = document.querySelector('.library-loader');\nconst errorBox = document.querySelector('.library-error');\n\n/* ======================================================\n   PAGINATION & STATE\n   Sayfa başına film sayısı ve uygulama state'leri\n====================================================== */\n\nconst PER_PAGE = 9;\nlet currentPage = 1;\n\n// Tüm filmler (filtrelenmiş haliyle)\nlet allMovies = [];\n\n// LocalStorage’dan gelen asıl kütüphane verisi\nlet libraryMovies = [];\n\n/* ======================================================\n   ERROR HANDLING\n   Hata durumunda error box göster / gizle\n====================================================== */\n\nfunction showError() {\n  if (!errorBox) return;\n  errorBox.classList.remove('hidden');\n}\n\nfunction hideError() {\n  if (!errorBox) return;\n  errorBox.classList.add('hidden');\n}\n\n/* ======================================================\n   DATA NORMALIZATION\n   Eksik gelen film verilerini standart hale getirir\n====================================================== */\n\nfunction normalizeMovie(movie) {\n  let genreNames = [];\n\n  if (Array.isArray(movie.genres) && movie.genres.length) {\n    genreNames = movie.genres.map(g => g.name);\n  }\n\n  const genreLabel =\n    genreNames.length > 0 ? genreNames.slice(0, 2).join(', ') : 'Unknown';\n\n  const genreKey =\n    genreNames.length > 0 ? genreNames[0].toLowerCase() : 'unknown';\n\n  return {\n    ...movie,\n    year: movie.release_date?.slice(0, 4) || movie.year || '2023',\n    rating: movie.rating || movie.vote_average?.toFixed(1) || '7.0',\n    genre: genreLabel,\n    _genreKey: genreKey,\n  };\n}\n\n/* ======================================================\n   RATING STARS\n   Rating değerine göre yıldız SVG'lerini üretir\n====================================================== */\n\nfunction createStarsSVG(rating) {\n  const score = Number(rating) / 2;\n  const full = Math.round(score);\n  const empty = 5 - full;\n\n  let stars = '';\n\n  for (let i = 0; i < full; i++) {\n    stars += `<img class=\"star\" src=\"/assets/star-icon-filled.svg\" alt=\"star\" />`;\n  }\n\n  for (let i = 0; i < empty; i++) {\n    stars += `<img class=\"star\" src=\"/assets/star-icon.svg\" alt=\"star\" />`;\n  }\n\n  return stars;\n}\n\n/* ======================================================\n   LOCAL STORAGE\n   Kullanıcının kütüphanesini LocalStorage'dan alır\n====================================================== */\n\nconst LIBRARY_KEY = 'my-library';\n\nfunction getLibraryMovies() {\n  return JSON.parse(localStorage.getItem(LIBRARY_KEY)) || [];\n}\n\n/* ======================================================\n   CARD TEMPLATE\n   Tek bir film kartının HTML çıktısını üretir\n====================================================== */\n\nfunction createMovieCard(movie) {\n  const stars = createStarsSVG(movie.rating);\n\n  return `\n    <li class=\"library-movie-card\" data-id=\"${movie.id}\">\n      <div class=\"card-poster\">\n        <img\n          src=\"https://image.tmdb.org/t/p/w500${movie.poster_path}\"\n          alt=\"${movie.title}\"\n        />\n\n        <div class=\"card-overlay\">\n          <h3 class=\"movie-title\">${movie.title.toUpperCase()}</h3>\n\n          <div class=\"card-bottom\">\n            <p class=\"movie-meta\">\n              ${movie.genre} | ${movie.year || '2024'}\n            </p>\n\n            <div class=\"movie-rating\">\n              ${stars}\n            </div>\n          </div>\n        </div>\n      </div>\n    </li>\n  `;\n}\n\n/* ======================================================\n   RENDER\n   Film listesini DOM'a basar\n====================================================== */\n\nfunction renderMovies(movies) {\n  listEl.innerHTML = movies.map(createMovieCard).join('');\n}\n\n/* ======================================================\n   PAGINATION LOGIC\n   Mevcut sayfaya göre gösterilecek filmleri hesaplar\n====================================================== */\n\nfunction getVisibleMovies() {\n  return allMovies.slice(0, currentPage * PER_PAGE);\n}\n\n/* ======================================================\n   EMPTY STATE\n   Liste boşsa empty ekranını yönetir\n====================================================== */\n\nfunction toggleEmpty(movies) {\n  const isEmpty = movies.length === 0;\n\n  emptyBox.classList.toggle('hidden', !isEmpty);\n  listEl.classList.toggle('hidden', isEmpty);\n  // Keep controls visible even when library is empty\n  if (controlsBox) {\n    controlsBox.classList.remove('hidden');\n  }\n\n  if (loadMoreBtn) {\n    loadMoreBtn.classList.toggle('hidden', isEmpty);\n  }\n}\n\n/* ======================================================\n   UI UPDATE\n   Liste, empty state ve load more butonunu günceller\n====================================================== */\n\nfunction updateUI() {\n  const visible = getVisibleMovies();\n\n  renderMovies(visible);\n  toggleEmpty(allMovies);\n\n  if (!loadMoreBtn) return;\n\n  if (visible.length < allMovies.length) {\n    loadMoreBtn.classList.remove('hidden');\n  } else {\n    loadMoreBtn.classList.add('hidden');\n  }\n}\n\n/* ======================================================\n   LOAD MORE BUTTON\n   Daha fazla film yüklemek için pagination artırılır\n====================================================== */\n\nif (loadMoreBtn) {\n  loadMoreBtn.addEventListener('click', () => {\n    currentPage++;\n    updateUI();\n  });\n}\n\n/* ======================================================\n   GENRE DROPDOWN TOGGLE\n====================================================== */\n\nif (genreBtn && genreMenu) {\n  genreBtn.addEventListener('click', () => {\n    genreMenu.classList.toggle('open');\n    genreBtn.classList.toggle('active');\n  });\n}\n\n/* ======================================================\n   INITIALIZATION\n   Sayfa ilk açıldığında çalışan ana akış\n====================================================== */\n\nfunction initLibrary() {\n  showLoader();\n  hideError();\n\n  try {\n    setTimeout(() => {\n      libraryMovies = getLibraryMovies().map(normalizeMovie);\n      allMovies = [...libraryMovies];\n\n      fillGenres(libraryMovies);\n      updateUI();\n\n      hideLoader();\n    }, 800);\n  } catch (err) {\n    console.error(err);\n    hideLoader();\n    showError();\n  }\n}\n\n/* ======================================================\n   LOADER CONTROLS\n====================================================== */\n\nfunction showLoader() {\n  if (!loaderBox) return;\n  loaderBox.classList.remove('hidden');\n  listEl.classList.add('hidden');\n}\n\nfunction hideLoader() {\n  loaderBox.classList.add('hidden');\n  listEl.classList.remove('hidden');\n}\n\n/* ======================================================\n   EXPORTED INIT FUNCTION\n   Dışarıdan çağrılacak ana giriş noktası\n====================================================== */\n\nexport function initMyLibrary() {\n  if (!document.querySelector('.library-section')) return;\n  initLibrary();\n}\n\n/* ======================================================\n   GENRE LIST CREATION\n   Film türlerini dinamik olarak üretir\n====================================================== */\n\nfunction fillGenres(movies) {\n  if (!genreMenu) return;\n\n  const genreSet = new Map();\n\n  movies.forEach(movie => {\n    if (!movie.genre || movie.genre === 'Unknown') return;\n\n    movie.genre.split(',').forEach(g => {\n      const label = g.trim();\n      const key = label.toLowerCase();\n\n      if (!genreSet.has(key)) {\n        genreSet.set(key, label);\n      }\n    });\n  });\n\n  // All Genres seçeneği\n  genreMenu.innerHTML = `\n    <li data-genre=\"all\" class=\"active\">All Genres</li>\n  `;\n\n  genreSet.forEach((label, key) => {\n    genreMenu.innerHTML += `\n      <li data-genre=\"${key}\">${label}</li>\n    `;\n  });\n\n  attachGenreEvents();\n}\n\n/* ======================================================\n   GENRE FILTER EVENTS\n====================================================== */\n\nfunction attachGenreEvents() {\n  if (!genreMenu || !genreText || !genreBtn) return;\n\n  const items = genreMenu.querySelectorAll('li');\n\n  items.forEach(item => {\n    item.addEventListener('click', () => {\n      const genre = item.dataset.genre;\n\n      items.forEach(i => i.classList.remove('active'));\n      item.classList.add('active');\n\n      genreMenu.classList.remove('open');\n      genreBtn.classList.remove('active');\n\n      genreText.textContent = item.textContent;\n\n      if (genre === 'all') {\n        allMovies = [...libraryMovies];\n      } else {\n        allMovies = libraryMovies.filter(movie =>\n          movie.genre.toLowerCase().includes(genre)\n        );\n      }\n\n      currentPage = 1;\n      updateUI();\n    });\n  });\n}\n\n/* ======================================================\n   OUTSIDE CLICK\n   Genre dropdown dışına tıklanınca kapanır\n====================================================== */\n\ndocument.addEventListener('click', e => {\n  if (!genreMenu || !genreBtn) return;\n  if (!e.target.closest('.genre-select')) {\n    genreMenu.classList.remove('open');\n    genreBtn.classList.remove('active');\n  }\n});\n\n/* ======================================================\n   MOVIE CARD CLICK\n   Film kartına tıklanınca modal açılmak üzere hazırlanır\n====================================================== */\n\nfunction openMovieModal(movie) {\n  openPopupSafe(movie?.id);\n}\n\n// ======================\n// POPUP HOOK (safe)\n// ======================\nfunction openPopupSafe(movieId) {\n  if (!movieId) return false;\n\n  if (typeof window.openMoviePopup === 'function') {\n    window.openMoviePopup(movieId);\n    return true;\n  }\n\n  console.warn(\n    'openMoviePopup bulunamadı. Popup modülü sayfaya yüklenmemiş olabilir.'\n  );\n  return false;\n}\n\nif (listEl) {\n  listEl.addEventListener('click', e => {\n    const card = e.target.closest('.library-movie-card');\n    if (!card) return;\n\n    const movieId = card.dataset.id;\n    const movie = allMovies.find(m => String(m.id) === movieId);\n    if (!movie) return;\n\n    openMovieModal(movie);\n  });\n}\n","export function renderTrailerPopup() {}\n","// Modüller\nimport { BASE_URL, API_KEY } from './api/movies-api.js';\nimport { renderMoviePopup } from './pop-up-movie-card.js';\nimport { renderTrailerPopup as externalRenderTrailer } from './pop-up-trailer-card.js';\n\nconst IMAGE_BASE_URL = 'https://image.tmdb.org/t/p/original';\nconst FALLBACK_IMAGE = '../img/library-hero-image.jpg';\n\n// Loader\nconst myLibraryHeroLoader = document.querySelector('.my-library-hero__loader');\n\nfunction showLoader() {\n  myLibraryHeroLoader?.classList.remove('is-hidden');\n}\n\nfunction hideLoader() {\n  myLibraryHeroLoader?.classList.add('is-hidden');\n}\n\n// Error popup\nfunction showErrorPopup() {\n  const errorPopup = document.getElementById('my-library-error-popup');\n  if (errorPopup) errorPopup.classList.add('show');\n}\n\nfunction closeErrorPopup() {\n  const errorPopup = document.getElementById('my-library-error-popup');\n  if (errorPopup) errorPopup.classList.remove('show');\n}\n\n// Tema\nfunction loadSavedTheme() {\n  const savedTheme = localStorage.getItem('theme') || 'dark';\n  document.body.classList.remove('dark-theme', 'light-theme');\n  document.body.classList.add(`${savedTheme}-theme`);\n}\n\nfunction myRenderTrailerPopup(videoKey) {\n  const modal = document.getElementById('my-library-video-modal');\n  const iframe = document.getElementById('my-library-trailer-video');\n\n  if (modal && iframe) {\n    iframe.src = `https://www.youtube.com/embed/${videoKey}?autoplay=1`;\n    modal.classList.remove('modal-hidden');\n  }\n}\n\nfunction renderTrailerPopup(videoKey) {\n  // renderTrailerPopup\n  if (typeof externalRenderTrailer === 'function') {\n    try {\n      externalRenderTrailer(videoKey);\n\n      // Eğer modal açıldıysa başarılı\n      const externalModal = document.getElementById('video-modal');\n      if (externalModal && !externalModal.classList.contains('modal-hidden')) {\n        return;\n      }\n    } catch (error) {\n      console.warn(\n        'External trailer popup failed, using My Library popup:',\n        error\n      );\n    }\n  }\n\n  // Eğer external çalışmazsa kendi modalını kullan\n  myRenderTrailerPopup(videoKey);\n}\n\n// My Library video modal kapatma\nfunction closeMyLibraryVideoModal() {\n  const modal = document.getElementById('my-library-video-modal');\n  const iframe = document.getElementById('my-library-trailer-video');\n\n  if (modal && iframe) {\n    modal.classList.add('modal-hidden');\n    iframe.src = '';\n  }\n}\n\n// My Library Hero\nasync function initializeMyLibraryHero() {\n  try {\n    const userMovies = getUserMoviesFromLocalStorage();\n\n    if (userMovies && userMovies.length > 0) {\n      const randomMovie = getRandomMovieFromUserLibrary(userMovies);\n      displayMyLibraryHero(randomMovie);\n    } else {\n      displayDefaultMyLibraryHero();\n    }\n  } catch (error) {\n    console.error('Error initializing my library hero:', error);\n    displayDefaultMyLibraryHero();\n  }\n}\n\n// LocalStorage\nfunction getUserMoviesFromLocalStorage() {\n  try {\n    const savedMovies = localStorage.getItem('my-library');\n    return savedMovies ? JSON.parse(savedMovies) : null;\n  } catch (error) {\n    console.error('Error reading from localStorage:', error);\n    return null;\n  }\n}\n\n// Rastgele film\nfunction getRandomMovieFromUserLibrary(movies) {\n  if (!movies || movies.length === 0) return null;\n  const randomIndex = Math.floor(Math.random() * movies.length);\n  return movies[randomIndex];\n}\n\n// Yıldız\nfunction generateStarRating(rating) {\n  const starCount = rating / 2;\n  const fullStars = Math.floor(starCount);\n  const hasHalfStar = starCount % 1 >= 0.3;\n  const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);\n\n  let starsHTML = '';\n\n  for (let i = 0; i < fullStars; i++) {\n    starsHTML += '<span class=\"star filled\">★</span>';\n  }\n\n  if (hasHalfStar) {\n    starsHTML += '<span class=\"star half\">★</span>';\n  }\n\n  for (let i = 0; i < emptyStars; i++) {\n    starsHTML += '<span class=\"star empty\">★</span>';\n  }\n\n  return starsHTML;\n}\n\n// DOM\nfunction displayMyLibraryHero(movie) {\n  if (!movie) {\n    displayDefaultMyLibraryHero();\n    return;\n  }\n\n  const myLibraryHeroSection = document.querySelector('.my-library-hero');\n  const myLibraryHeroOverlay = document.querySelector(\n    '.my-library-hero__overlay'\n  );\n\n  if (!myLibraryHeroSection || !myLibraryHeroOverlay) {\n    console.error('Hero elements not found!');\n    return;\n  }\n\n  const backgroundImage = movie.backdrop_path\n    ? `${IMAGE_BASE_URL}${movie.backdrop_path}`\n    : FALLBACK_IMAGE;\n\n  myLibraryHeroSection.style.backgroundImage = `url('${backgroundImage}')`;\n\n  const overview =\n    movie.overview?.length > 180\n      ? `${movie.overview.slice(0, 180)}...`\n      : movie.overview || 'No description available.';\n\n  const starRating = movie.vote_average\n    ? generateStarRating(movie.vote_average)\n    : '';\n\n  myLibraryHeroOverlay.innerHTML = `\n    <h1 class=\"my-library-hero__title\">${movie.title}</h1>\n    ${starRating ? `<div class=\"my-library-hero__rating\">${starRating}</div>` : ''}\n    <p class=\"my-library-hero__description\">${overview}</p>\n    <div class=\"my-library-hero__buttons\">\n      <button class=\"my-library-hero__btn my-library-hero__btn--trailer\" id=\"my-library-hero-trailer-btn\">\n        Watch trailer\n      </button>\n      <button class=\"my-library-hero__btn my-library-hero__btn--details\" id=\"my-library-hero-details-btn\">\n        More details\n      </button>\n    </div>\n  `;\n\n  attachMyLibraryHeroButtonListeners(movie.id);\n}\n\n// Buton\nfunction attachMyLibraryHeroButtonListeners(movieId) {\n  const detailsBtn = document.getElementById('my-library-hero-details-btn');\n  const trailerBtn = document.getElementById('my-library-hero-trailer-btn');\n\n  if (detailsBtn) {\n    const newDetailsBtn = detailsBtn.cloneNode(true);\n    detailsBtn.parentNode.replaceChild(newDetailsBtn, detailsBtn);\n    newDetailsBtn.addEventListener('click', () =>\n      handleShowMovieDetails(movieId)\n    );\n  }\n\n  if (trailerBtn) {\n    const newTrailerBtn = trailerBtn.cloneNode(true);\n    trailerBtn.parentNode.replaceChild(newTrailerBtn, trailerBtn);\n    newTrailerBtn.addEventListener('click', () => handleShowTrailer(movieId));\n  }\n}\n\n// Detay modal\nfunction handleShowMovieDetails(movieId) {\n  if (typeof renderMoviePopup === 'function') {\n    renderMoviePopup(movieId);\n  } else if (typeof window.openMoviePopup === 'function') {\n    window.openMoviePopup(movieId);\n  } else {\n    console.error('Movie popup is not ready.');\n    showErrorPopup();\n  }\n}\n\n// Fragman modal\nasync function handleShowTrailer(movieId) {\n  showLoader();\n  try {\n    const response = await fetch(\n      `${BASE_URL}/movie/${movieId}/videos?api_key=${API_KEY}&language=en-us`\n    );\n\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n\n    const data = await response.json();\n\n    const trailer = data.results?.find(\n      video => video.type === 'Trailer' && video.site === 'YouTube'\n    );\n\n    if (trailer) {\n      renderTrailerPopup(trailer.key);\n    } else {\n      showErrorPopup();\n    }\n  } catch (error) {\n    console.error('Error loading trailer:', error);\n    showErrorPopup();\n  } finally {\n    hideLoader();\n  }\n}\n\n// Default Hero\nfunction displayDefaultMyLibraryHero() {\n  const myLibraryHeroSection = document.querySelector('.my-library-hero');\n  const myLibraryHeroOverlay = document.querySelector(\n    '.my-library-hero__overlay'\n  );\n\n  if (myLibraryHeroSection) {\n    myLibraryHeroSection.style.backgroundImage = `url('${FALLBACK_IMAGE}')`;\n  }\n\n  if (!myLibraryHeroOverlay) return;\n\n  myLibraryHeroOverlay.innerHTML = `\n    <h1 class=\"my-library-hero__title\">Create Your Dream Cinema</h1>\n    <p class=\"my-library-hero__description\">\n      Is a guide to designing a personalized movie theater experience with the right equipment,\n      customized decor, and favorite films.\n    </p>\n  `;\n}\n\n// Event Listeners\ndocument.addEventListener('DOMContentLoaded', () => {\n  if (!document.querySelector('.my-library-hero')) return;\n\n  loadSavedTheme();\n  initializeMyLibraryHero();\n\n  // Error popup\n  const errorCloseBtn = document.querySelector('.my-library-error__close');\n  if (errorCloseBtn) {\n    errorCloseBtn.addEventListener('click', closeErrorPopup);\n  }\n\n  const errorPopup = document.getElementById('my-library-error-popup');\n  if (errorPopup) {\n    errorPopup.addEventListener('click', e => {\n      if (e.target.id === 'my-library-error-popup') {\n        closeErrorPopup();\n      }\n    });\n  }\n\n  // X butonu\n  const closeVideoBtn = document.querySelector('.close-my-library-video');\n  if (closeVideoBtn) {\n    closeVideoBtn.addEventListener('click', closeMyLibraryVideoModal);\n  }\n\n  // Modal dışı\n  const videoModal = document.getElementById('my-library-video-modal');\n  if (videoModal) {\n    videoModal.addEventListener('click', e => {\n      if (e.target.id === 'my-library-video-modal') {\n        closeMyLibraryVideoModal();\n      }\n    });\n  }\n\n  // ESC tuşu\n  document.addEventListener('keydown', e => {\n    if (e.key === 'Escape') {\n      // Error popup\n      const errorPopup = document.getElementById('my-library-error-popup');\n      if (errorPopup?.classList.contains('show')) {\n        closeErrorPopup();\n      }\n\n      // Video modal\n      const videoModal = document.getElementById('my-library-video-modal');\n      if (videoModal && !videoModal.classList.contains('modal-hidden')) {\n        closeMyLibraryVideoModal();\n      }\n    }\n  });\n});\n\n// Export\nexport { initializeMyLibraryHero };\n","\n// Developer Team Data\nconst developers = [\n    {\n        name: 'Çiğdem Ergal',\n        role: 'Team Lead',\n        image: new URL('../images/footer/cigdem.webp', import.meta.url).href,\n        github: 'https://github.com/CigdemErgal',\n        linkedin: 'https://www.linkedin.com/in/%C3%A7i%C4%9Fdem-ergal/',\n    },\n    {\n        name: 'Halenur Gürel',\n        role: 'Scrum Master',\n        image: new URL('../images/footer/halenur.webp', import.meta.url).href,\n        github: 'https://github.com/halenurgurel',\n        linkedin: 'https://www.linkedin.com/in/halenurgurel/',\n    },\n    {\n        name: 'Ali Hamza Çakmak',\n        role: 'Developer',\n        image: new URL('../images/footer/ali.webp', import.meta.url).href,\n        github: 'https://github.com/MRMARUL',\n        linkedin: 'https://www.linkedin.com/in/ali-hamza-%C3%A7akmak-8112553a8/',\n    },\n    {\n        name: 'Aslıhan Erdal',\n        role: 'Developer',\n        image: new URL('../images/footer/aslihan.webp', import.meta.url).href,\n        github: 'https://github.com/ERDLL0',\n        linkedin: 'https://www.linkedin.com/in/aslihan-erdal/',\n    },\n    {\n        name: 'Burak Gökay',\n        role: 'Developer',\n        image: new URL('../images/footer/burak.webp', import.meta.url).href,\n        github: 'https://github.com/bgokay007-tech',\n        linkedin: 'https://www.linkedin.com/in/burak-g%C3%B6kay-196b66348/',\n    },\n    {\n        name: 'Kerem Yıldırım',\n        role: 'Developer',\n        image: new URL('../images/footer/kerem.webp', import.meta.url).href,\n        github: 'https://github.com/keremyldrm61',\n        linkedin: 'https://www.linkedin.com/in/kerem-y%C4%B1ld%C4%B1r%C4%B1m-0053a5191/',\n    },\n    {\n        name: 'Kutluhan Gül',\n        role: 'Developer',\n        image: new URL('../images/footer/kutluhan.webp', import.meta.url).href,\n        github: 'https://github.com/kutluhangil',\n        linkedin: 'https://www.linkedin.com/in/kutluhangil/',\n    },\n    {\n        name: 'Nur Seda Ağgünlü',\n        role: 'Developer',\n        image: new URL('../images/footer/nurseda.webp', import.meta.url).href,\n        github: 'https://github.com/nursedaaggunlu',\n        linkedin: 'https://www.linkedin.com/in/nur-seda-aggunlu/',\n    },\n    {\n        name: 'Yusuf Soylu',\n        role: 'Developer',\n        image: new URL('../images/footer/yusuf.webp', import.meta.url).href,\n        github: 'https://github.com/soylu1092',\n        linkedin: 'https://www.linkedin.com/in/yusuf-soylu-525236306/',\n    },\n    {\n        name: 'Zehra Yazıcı',\n        role: 'Developer',\n        image: new URL('../images/footer/zehra.webp', import.meta.url).href,\n        github: 'https://github.com/zehrayazici',\n        linkedin: 'https://www.linkedin.com/in/zehrayazici/',\n    },\n];\n\n// Icons with white fill\nconst svgs = {\n    github: `<svg class=\"social-icon-svg\" viewBox=\"0 0 24 24\" style=\"fill: white;\"><path d=\"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z\"/></svg>`,\n    linkedin: `<svg class=\"social-icon-svg\" viewBox=\"0 0 24 24\" style=\"fill: white;\"><path d=\"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z\"/></svg>`\n};\n\nexport function initFooter() {\n    const footerLinkSelector = '#footer-link';\n    const backdropSelector = '[data-footer-modal]';\n    const closeBtnSelector = '[data-footer-close]';\n    const teamListSelector = '.team-list';\n\n    // Helper to get backdrop safely\n    const getBackdrop = () => document.querySelector(backdropSelector);\n\n    // Render Function\n    const renderTeam = () => {\n        const teamList = document.querySelector(teamListSelector);\n        if (!teamList || teamList.children.length > 0) return;\n\n        const markup = developers.map(dev => `\n            <li class=\"team-card\">\n              <img\n                src=\"${dev.image}\"\n                alt=\"${dev.name}\"\n                class=\"team-image\"\n                loading=\"lazy\"\n                width=\"180\"\n                height=\"180\"\n                onerror=\"this.src='https://placehold.co/180x180?text=${encodeURIComponent(dev.name)}'\"\n              />\n              <h3 class=\"team-name\">${dev.name}</h3>\n              <p class=\"team-role\">${dev.role}</p>\n              <div class=\"social-links\">\n                <a href=\"${dev.github}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"social-link\" aria-label=\"GitHub\">\n                  ${svgs.github}\n                </a>\n                <a href=\"${dev.linkedin}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"social-link\" aria-label=\"LinkedIn\">\n                  ${svgs.linkedin}\n                </a>\n              </div>\n            </li>\n        `).join('');\n\n        teamList.innerHTML = markup;\n    };\n\n    const openModal = (e) => {\n        const backdrop = getBackdrop();\n        if (backdrop) {\n            e.preventDefault();\n            renderTeam();\n            backdrop.classList.remove('is-hidden');\n            document.body.style.overflow = 'hidden';\n        }\n    };\n\n    const closeModal = () => {\n        const backdrop = getBackdrop();\n        if (backdrop) {\n            backdrop.classList.add('is-hidden');\n            document.body.style.overflow = '';\n        }\n    };\n\n    // Event Delegation\n    document.addEventListener('click', (e) => {\n        if (e.target.closest(footerLinkSelector)) {\n            openModal(e);\n            return;\n        }\n\n        if (e.target.closest(closeBtnSelector)) {\n            closeModal();\n            return;\n        }\n\n        const backdrop = getBackdrop();\n        if (backdrop && e.target === backdrop) {\n            closeModal();\n        }\n    });\n\n    // Close (ESC)\n    document.addEventListener('keydown', (e) => {\n        const backdrop = getBackdrop();\n        if (e.key === 'Escape' && backdrop && !backdrop.classList.contains('is-hidden')) {\n            closeModal();\n        }\n    });\n}\n\n// Scroll to Top Logic\nconst scrollToTopBtn = document.querySelector('.scroll-to-top');\n\nif (scrollToTopBtn) {\n    window.addEventListener('scroll', () => {\n        if (window.scrollY > 300) {\n            scrollToTopBtn.classList.add('is-visible');\n        } else {\n            scrollToTopBtn.classList.remove('is-visible');\n        }\n    });\n\n    scrollToTopBtn.addEventListener('click', () => {\n        window.scrollTo({\n            top: 0,\n            behavior: 'smooth'\n        });\n    });\n}\n","import './css/styles.css';\nimport './css/header.css';\nimport './css/my-library-hero.css';\nimport './css/pop-up-movie-card.css';\nimport './css/upcoming-this-month.css';\nimport './css/weekly-trends.css';\n\nimport { initHeader } from './js/header.js';\nimport { initWeeklyTrends } from './js/weekly-trends.js';\nimport { initUpcomingThisMonth } from './js/upcoming-this-month.js';\nimport { initCatalog } from './js/catalog.js';\nimport { startHeroApp } from './js/hero.js';\nimport { initMyLibrary } from './js/my-library.js';\nimport { initializeMyLibraryHero } from './js/my-library-hero.js';\nimport { initFooter } from './js/footer.js';\nimport './js/pop-up-movie-card.js';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  initHeader();\n  initFooter();\n\n  const isLibraryPage = document.querySelector('.library-section') !== null;\n\n  if (isLibraryPage) {\n    initializeMyLibraryHero();\n    initMyLibrary();\n  } else {\n    initCatalog();\n    startHeroApp();\n    initUpcomingThisMonth();\n  }\n});\n"],"names":["THEME_KEY","THEME_DARK","THEME_LIGHT","applyTheme","theme","body","getSavedTheme","saveTheme","initThemeToggle","toggleBtn","next","initMobileMenu","burgerBtn","menuOverlay","openMenu","closeMenu","e","initActiveNav","current","links","link","href","initHeader","API_KEY","BASE_URL","IMAGE_BASE","getWeeklyTrending","response","error","getMovieDetails","movieId","getDailyTrending","movieGrid","cachedMovies","getVisibleCount","renderMovies","count","displayMovies","initWeeklyTrends","movies","movie","releaseYear","stars","renderStars","_a","rating","value","starCount","fullStars","hasHalfStar","emptyStars","starsHTML","i","card","openPopupSafe","IMG_URL","LIB_KEY","LEGACY_LIB_KEY","wrapper","genresMap","initUpcoming","fetchGenres","fetchUpcomingMovie","initUpcomingThisMonth","g","date","year","month","startOfMonth","randomIndex","renderMovie","genreNames","id","releaseDate","isSaved","isInLibrary","html","btn","toggleLibrary","newState","updateButtonState","getLibrary","legacy","m","lib","initPagination","rootSelector","onPageChange","root","prevBtn","nextBtn","numbersEl","page","totalPages","show","hide","setNavButtons","formatPageNumber","num","clamp","n","min","max","uniqClean","model","total","cleaned","item","last","final","cur","prev","buildModel","_","render","initCatalog","selectedYearValue","currentQuery","hasSearched","genreMap","currentMode","moviesContainer","emptyMessage","paginationRoot","pagination","searchMovies","fetchTrending","filmInput","clearBtn","searchBtn","yearBtn","yearDropdown","selectedYear","searchRow","y","input","parent","clearInputBtn","clearBtnSafe","setupPagination","pages","r","d","err","setDropdownOpen","isOpen","chevron","url","maxPages","poster","genres","_b","renderStarsToRating","el","fillType","gid","createLoader","text","spinner","label","LIBRARY_KEY","loader","overlay","closeBtn","libraryBtn","posterImg","titleEl","infoValues","descriptionEl","initPopup","closeMoviePopup","openMoviePopup","voteAvg","voteCount","inLibrary","library","IMAGE_URL","getEl","initHero","showHeroLoader","results","randomMovie","displayMovie","displayDefaultHero","removeHeroLoader","heroSection","title","desc","trailerBtn","detailsBtn","ratingContainer","getTrailer","renderHeroStars","trailer","v","openVideoModal","showErrorPopup","errorPopup","videoKey","modal","iframe","setupEventListeners","videoModal","errorModal","videoIframe","closeVideoBtn","closeErrorBtn","event","buttonsContainer","heroContent","startHeroApp","listEl","loadMoreBtn","emptyBox","controlsBox","genreBtn","genreMenu","genreText","loaderBox","errorBox","PER_PAGE","currentPage","allMovies","libraryMovies","showError","hideError","normalizeMovie","genreLabel","genreKey","createStarsSVG","score","full","empty","getLibraryMovies","createMovieCard","getVisibleMovies","toggleEmpty","isEmpty","updateUI","visible","initLibrary","showLoader","fillGenres","hideLoader","initMyLibrary","genreSet","key","attachGenreEvents","items","genre","openMovieModal","renderTrailerPopup","IMAGE_BASE_URL","FALLBACK_IMAGE","myLibraryHeroLoader","closeErrorPopup","loadSavedTheme","savedTheme","myRenderTrailerPopup","externalRenderTrailer","externalModal","closeMyLibraryVideoModal","initializeMyLibraryHero","userMovies","getUserMoviesFromLocalStorage","getRandomMovieFromUserLibrary","displayMyLibraryHero","displayDefaultMyLibraryHero","savedMovies","generateStarRating","myLibraryHeroSection","myLibraryHeroOverlay","backgroundImage","overview","starRating","attachMyLibraryHeroButtonListeners","newDetailsBtn","handleShowMovieDetails","newTrailerBtn","handleShowTrailer","renderMoviePopup","video","errorCloseBtn","developers","svgs","initFooter","footerLinkSelector","backdropSelector","closeBtnSelector","teamListSelector","getBackdrop","renderTeam","teamList","markup","dev","openModal","backdrop","closeModal","scrollToTopBtn"],"mappings":"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"}