(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const Ee="cinemania-theme",ee="dark",A="light";function me(e){const t=document.body;t.classList.remove("dark-theme","light-theme"),e===A?t.classList.add("light-theme"):t.classList.add("dark-theme")}function He(){return localStorage.getItem(Ee)===A?A:ee}function Ne(e){localStorage.setItem(Ee,e)}function Re(){const e=document.querySelector(".theme-toggle");e&&(me(He()),e.addEventListener("click",()=>{const n=(document.body.classList.contains("light-theme")?A:ee)===A?ee:A;me(n),Ne(n)}))}function De(){const e=document.querySelector(".burger-btn"),t=document.querySelector("[data-menu]");if(!e||!t)return;const n=()=>t.classList.remove("is-hidden"),o=()=>t.classList.add("is-hidden");e.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),t.classList.contains("is-hidden")?n():o()}),t.addEventListener("click",r=>{r.target===t&&o()}),t.addEventListener("click",r=>{r.target.closest(".mobile-menu-link")&&o()}),window.addEventListener("keydown",r=>{r.key==="Escape"&&o()})}function Ue(){const t=window.location.pathname.split("/").pop()||"index.html",n=document.querySelectorAll(".header-nav-link, .mobile-menu-link");n.length&&(n.forEach(o=>o.classList.remove("active")),n.forEach(o=>{const r=o.getAttribute("href");if(!r)return;r.split("/").pop()===t&&o.classList.add("active")}))}function Fe(){Re(),De(),Ue()}const $="6e2b9ceff6313b472d60eed2769db38a",B="https://api.themoviedb.org/3",Ye="https://image.tmdb.org/t/p/w500";async function ze(){try{const e=await fetch(`${B}/trending/movie/week?api_key=${$}`);if(!e.ok)throw new Error("Veri çekilemedi!");return(await e.json()).results}catch(e){return console.error("Hata:",e),[]}}async function Ge(e){try{return await(await fetch(`${B}/movie/${e}?api_key=${$}`)).json()}catch(t){console.error("Detay Hatası:",t)}}async function je(){try{const e=await fetch(`${B}/trending/movie/day?api_key=${$}`);if(!e.ok)throw new Error("Veri çekilemedi!");return(await e.json()).results}catch(e){return console.error("Hata:",e),[]}}const F=document.getElementById("movie-grid");let O=[];function Oe(){return window.matchMedia("(min-width: 768px)").matches?3:1}function fe(){if(!F)return;const e=Oe();Ve(O.slice(0,e))}async function Ke(){if(F)try{O=await ze(),O&&O.length>0&&(fe(),window.addEventListener("resize",fe))}catch(e){console.error("Trend verileri yüklenirken hata oluştu:",e)}}function Ve(e){F.innerHTML=e.map(t=>{var r;const n=t.release_date?t.release_date.split("-")[0]:"2023",o=Je(t.vote_average);return`
        <div class="weekly-trends__item" data-movie-id="${t.id}">
            <div class="weekly-trends__card">
                <img src="https://image.tmdb.org/t/p/w500${t.poster_path}" alt="${t.title}" loading="lazy">
                
                <div class="weekly-trends__info">
                    <div class="weekly-trends__text">
                        <div class="weekly-trends__movie-title">${t.title}</div>
                        <div class="weekly-trends__movie-meta">Drama, Action | ${n}</div>
                    </div>
                    <div class="weekly-trends__stars" aria-label="Rating ${(r=t.vote_average)!=null&&r.toFixed?t.vote_average.toFixed(1):"N/A"}">${o}</div>
                </div>
            </div>
        </div>
    `}).join("")}function Je(e){const t=Number(e);if(!Number.isFinite(t))return"";const n=t/2,o=Math.floor(n),r=n%1>=.3,i=5-o-(r?1:0);let a="";for(let d=0;d<o;d++)a+='<span class="star-item star-filled"></span>';r&&(a+='<span class="star-item star-half"></span>');for(let d=0;d<i;d++)a+='<span class="star-item star-empty"></span>';return a}Ke();F&&F.addEventListener("click",e=>{const t=e.target.closest(".weekly-trends__item");if(!t)return;const n=t.dataset.movieId;We(n)});function We(e){return e?typeof window.openMoviePopup=="function"?(window.openMoviePopup(e),!0):(console.warn("openMoviePopup bulunamadı. Popup modülü sayfaya yüklenmemiş olabilir."),!1):!1}const Me="c43a3c633ad33367e1cd1eb02f47a173",Se="https://api.themoviedb.org/3",Qe="https://image.tmdb.org/t/p/original",te="my-library",ye="myLibrary",J=document.getElementById("upcoming-wrapper");let _e={};async function Ze(){try{await et(),await tt()}catch(e){console.error("Hata:",e),J.innerHTML="<p>Film bilgileri yüklenemedi.</p>"}}function Xe(){if(J)return Ze()}async function et(){(await(await fetch(`${Se}/genre/movie/list?api_key=${Me}`)).json()).genres.forEach(n=>{_e[n.id]=n.name})}async function tt(){const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),o=`${t}-${n}-01`,a=(await(await fetch(`${Se}/discover/movie?api_key=${Me}&primary_release_date.gte=${o}&sort_by=popularity.desc&include_adult=false&include_video=false`)).json()).results;if(a.length>0){const d=Math.floor(Math.random()*a.length);nt(a[d])}else J.innerHTML="<p>Bu ay için vizyon filmi bulunamadı.</p>"}function nt(e){const t=e.genre_ids.slice(0,2).map(a=>_e[a]).join(", "),n=new Date(e.release_date).toLocaleDateString("tr-TR"),o=ne(e.id),r=`
    <div class="upcoming-poster-container" id="posterClick">
      <img src="${Qe}${e.backdrop_path||e.poster_path}" alt="${e.title}">
    </div>

    <div class="upcoming-info-container">
      <h3 class="upcoming-movie-title" id="titleClick">${e.title}</h3>
      
      <div class="upcoming-meta-grid">
        <span class="meta-label">Release date</span>
        <span class="meta-value highlight-date">${n}</span>

        <span class="meta-label">Vote / Votes</span>
        <span class="meta-value">
          <span class="vote-badge">${e.vote_average.toFixed(1)}</span> / <span class="vote-count">${e.vote_count}</span>
        </span>

        <span class="meta-label">Popularity</span>
        <span class="meta-value">${e.popularity.toFixed(1)}</span>

        <span class="meta-label">Genre</span>
        <span class="meta-value">${t}</span>
      </div>

      <div class="upcoming-about">
        <h4 class="upcoming-about-title">ABOUT</h4>
        <p class="upcoming-overview">${e.overview}</p>
      </div>

      <button class="btn-library ${o?"remove":"add"}" id="libraryBtn">
        ${o?"Remove from my library":"Add to my library"}
      </button>
    </div>
  `;J.innerHTML=r,document.getElementById("posterClick").addEventListener("click",()=>{he(e.id)}),document.getElementById("titleClick").addEventListener("click",()=>{he(e.id)});const i=document.getElementById("libraryBtn");i.addEventListener("click",()=>{ot(e);const a=ne(e.id);rt(i,a)})}function rt(e,t){t?(e.textContent="Remove from my library",e.classList.remove("add"),e.classList.add("remove")):(e.textContent="Add to my library",e.classList.remove("remove"),e.classList.add("add"))}function $e(){const e=JSON.parse(localStorage.getItem(te))||[];if(e.length>0)return e;const t=JSON.parse(localStorage.getItem(ye))||[];return t.length>0&&(localStorage.setItem(te,JSON.stringify(t)),localStorage.removeItem(ye)),t}function ne(e){return $e().some(t=>t.id===e)}function ot(e){let t=$e();ne(e.id)?t=t.filter(n=>n.id!==e.id):t.push(e),localStorage.setItem(te,JSON.stringify(t))}function he(e){return e?typeof window.openMoviePopup=="function"?(window.openMoviePopup(e),!0):(console.warn("openMoviePopup bulunamadı. Popup modülü sayfaya yüklenmemiş olabilir."),!1):!1}function it(e,t){const n=document.querySelector(e);if(!n)throw new Error(`Pagination root not found: ${e}`);const o=n.querySelector(".page-btn.prev"),r=n.querySelector(".page-btn.next"),i=n.querySelector(".page-numbers");let a=1,d=0;function m(){n.classList.add("is-visible")}function y(){n.classList.remove("is-visible"),i.innerHTML=""}function b(){o.disabled=a<=1,r.disabled=a>=d||d===0}function z(f){return f<10?`0${f}`:`${f}`}function w(f,c,u){return Math.min(u,Math.max(c,f))}function g(f,c){const u=[];for(const v of f){const S=u[u.length-1];v==="..."&&S==="..."||typeof v=="number"&&v===S||u.push(v)}u[0]!==1&&u.unshift(1),u[u.length-1]!==c&&u.push(c);const M=[];for(let v=0;v<u.length;v+=1){const S=u[v],L=M[M.length-1],P=u[v+1];if(S==="..."&&typeof L=="number"&&typeof P=="number"){if(P-L===2){M.push(L+1);continue}if(P-L<=1)continue}M.push(S)}return M}function R(f,c){const u=w(f,1,c);return c<=7?Array.from({length:c},(M,v)=>v+1):u<=2?g([1,2,3,"...",c],c):u>=c-1?g([1,"...",c-2,c-1,c],c):g([1,"...",u-1,u,u+1,"...",c],c)}function I(){if(d<=1){y();return}m(),b();const f=R(a,d);i.innerHTML=f.map(c=>c==="..."?'<span class="ellipsis">…</span>':`
          <button class="page-number ${c===a?"is-active":""}" type="button" data-page="${c}">
            ${z(c)}
          </button>
        `).join("")}return o.addEventListener("click",()=>{a<=1||(a-=1,t(a))}),r.addEventListener("click",()=>{a>=d||(a+=1,t(a))}),i.addEventListener("click",f=>{const c=f.target.closest("button[data-page]");if(!c)return;const u=Number(c.dataset.page);!Number.isFinite(u)||u===a||(a=u,t(a))}),{set(f,c=1){d=Number(f)||0,a=w(Number(c)||1,1,Math.max(1,d)),I()},reset(){a=1,d=0,y()},getPage(){return a}}}function at(){let e="",t="",n=!1,o={},r="trending";const i=document.getElementById("moviesContainer"),a=document.getElementById("emptyMessage"),d=document.querySelector(".pagination");if(!i||!a)return;const m=d?it(".pagination",s=>{r==="search"?S(s):L(s)}):null,y=document.querySelector(".search-input"),b=document.getElementById("clearSearch"),z=document.querySelector(".search-btn"),w=document.getElementById("yearBtn"),g=document.getElementById("yearDropdown"),R=document.getElementById("selectedYear");sessionStorage.getItem("scrollCatalog")==="true"&&(sessionStorage.removeItem("scrollCatalog"),setTimeout(()=>{const s=document.querySelector(".search-row");if(!s)return;const l=s.getBoundingClientRect().top+window.scrollY-20;window.scrollTo({top:l,behavior:"smooth"})},300));const I=document.querySelector(".search-input");if(!I)return;const f=I.parentElement;if(!f)return;const c=f.querySelector(".search-clear-btn");c&&(c.style.display="none");const u=b||c;function M(s,l){if(!m)return;const p=Math.min(500,Number(s)||0);if(p<=1){m.reset();return}m.set(p,l)}fetch(`${B}/genre/movie/list?api_key=${$}&language=en-US`).then(s=>s.json()).then(s=>{(s.genres||[]).forEach(l=>o[l.id]=l.name)}).catch(s=>console.error("genre list error:",s)),f.addEventListener("click",s=>{const l=s.target.closest(".search-clear-btn");l&&(I.value="",I.focus(),l.style.display="none")}),f.addEventListener("input",s=>{if(s.target!==I)return;const l=f.querySelector(".search-clear-btn");l&&(l.style.display=I.value?"block":"none")}),c&&c.addEventListener("click",()=>{y.value="",y.focus(),c.style.display="none"});function v(s){if(!g||!w)return;g.classList.toggle("open",s),w.classList.toggle("open",s),g.style.transform=s?"scaleY(1)":"scaleY(0)",g.style.opacity=s?"1":"0",g.style.pointerEvents=s?"auto":"none";const l=w.querySelector(".icon-chevron");l&&(l.style.transform=s?"rotate(180deg)":"rotate(0deg)")}w&&g&&(w.addEventListener("click",s=>{s.stopPropagation();const l=!g.classList.contains("open");v(l)}),g.addEventListener("click",s=>{s.stopPropagation(),s.target.tagName==="LI"&&(e=s.target.dataset.year||"",R.textContent=s.target.textContent,v(!1))})),document.addEventListener("click",s=>{!g||!w||g.classList.contains("open")&&!g.contains(s.target)&&!w.contains(s.target)&&v(!1)}),z&&z.addEventListener("click",()=>{if(t=y.value.trim(),n=!0,!t&&!e){n=!1,L(1);return}S(1)}),u&&u.addEventListener("click",function(){y.value="",c&&(c.style.display="none"),R&&(R.textContent="Year"),t="",e="",n=!1,L(1)});function S(s=1){let l="";r="search",t?(l=`${B}/search/movie?api_key=${$}&query=${encodeURIComponent(t)}&page=${s}`,e&&(l+=`&year=${e}`)):(l=`${B}/discover/movie?api_key=${$}&page=${s}`,e&&(l+=`&primary_release_year=${e}`)),fetch(l).then(p=>p.json()).then(p=>{const D=Math.min(500,Number(p.total_pages)||0);if(D&&s>D){S(D);return}P(p.results||[]),M(p.total_pages||0,s)}).catch(p=>console.error("searchMovies error:",p))}L(1);function L(s=1){a.style.display="none",r="trending",fetch(`${B}/trending/movie/week?api_key=${$}&page=${s}`).then(l=>l.json()).then(l=>{const p=Math.min(500,Number(l.total_pages)||0);if(p&&s>p){L(p);return}P(l.results||[]),M(l.total_pages||0,s)}).catch(l=>console.error("fetchTrending error:",l))}function P(s){if(i.innerHTML="",!s.length){a.style.display=n?"block":"none",m&&m.reset();return}a.style.display="none",s.slice(0,20).forEach(l=>{var ue,pe;const p=document.createElement("a");p.className="movie-card",p.setAttribute("data-id",l.id),p.setAttribute("data-movie-id",l.id),p.href=`catalog.html?id=${l.id}`;const D=l.poster_path?`${Ye}${l.poster_path}`:"https://placehold.co/600x400",Pe=((ue=l.release_date)==null?void 0:ue.slice(0,4))||"N/A",qe=((pe=l.genre_ids)==null?void 0:pe.map(G=>o[G]).filter(Boolean).slice(0,2).join(", "))||"Unknown";p.innerHTML=`
        <img src="${D}" alt="${l.title||"Movie"}">
        <div class="movie-card-overlay">
          <div class="movie-card-text">
            <h3>${l.title||"Untitled"}</h3>
            <div class="movie-meta">
              <span class="movie-genre">${qe}</span>
              <span class="movie-year">| ${Pe}</span>
            </div>
          </div>
          <div class="movie-rating-stars"></div>
        </div>
      `,p.addEventListener("click",G=>{G.preventDefault(),G.stopPropagation();const Ae=p.dataset.movieId;lt(Ae)}),i.appendChild(p),st(p.querySelector(".movie-rating-stars"),l.vote_average)})}}function st(e,t){if(!e)return;e.innerHTML="";const n=Math.floor(t/2),o=t%2>=1;for(let r=0;r<5;r++){let i="empty";r<n?i="full":r===n&&o&&(i="half");const a=`star-${Math.random().toString(36).slice(2)}`;e.innerHTML+=`
        <svg viewBox="0 0 32 32" width="14" height="14">
        <defs>
          <linearGradient id="${a}-full" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#F84119"/>
            <stop offset="100%" stop-color="#F89F19"/>
          </linearGradient>
          <linearGradient id="${a}-half" x1="0" y1="0" x2="1" y2="0">
            <stop offset="0%" stop-color="#F84119"/>
            <stop offset="50%" stop-color="#F89F19"/>
            <stop offset="50%" stop-color="#bfbfbf"/>
            <stop offset="100%" stop-color="#bfbfbf"/>
          </linearGradient>
        </defs>
        <path
          d="M24.622 30L16 24.173 7.378 30l3.135-9.286L2.388 15.14h10.024L16 5.827l3.588 9.313h10.024l-8.125 5.569z"
          fill="${i==="full"?`url(#${a}-full)`:i==="half"?`url(#${a}-half)`:"#bfbfbf"}"
        />
      </svg>
        `}}const lt=e=>typeof window.openMoviePopup=="function"?(window.openMoviePopup(e),!0):typeof openMoviePopup=="function"?(openMoviePopup(e),!0):(console.warn("openMoviePopup bulunamadı. Popup modülü sayfaya yüklenmemiş olabilir."),!1);function ct(e="Loading..."){const t=document.createElement("div");t.className="app-loader",t.setAttribute("role","status"),t.setAttribute("aria-live","polite");const n=document.createElement("div");n.className="app-loader__spinner",n.setAttribute("aria-hidden","true");const o=document.createElement("span");return o.className="app-loader__text",o.textContent=e,t.appendChild(n),t.appendChild(o),t}const Be="my-library";let K,_,W,k,re,oe,q,ie;function dt(){_=document.querySelector(".popup-modal-overlay"),K=document.querySelector(".popup-loader"),W=document.querySelector(".popup-modal-close"),k=document.querySelector(".popup-add-library-btn"),re=document.querySelector(".popup-movie-poster img"),oe=document.querySelector(".popup-movie-title"),q=document.querySelectorAll(".popup-movie-info .popup-value"),ie=document.querySelector(".popup-movie-description"),_&&(W&&W.addEventListener("click",Q),_.addEventListener("click",e=>{e.target===_&&Q()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&_.classList.contains("is-active")&&Q()}))}async function Y(e){var t;if(!(!_||!K)){_.classList.add("is-active"),K.classList.remove("is-hidden");try{const n=await Ge(e);if(re&&(re.src=n.poster_path?`https://image.tmdb.org/t/p/w500${n.poster_path}`:""),oe&&(oe.textContent=n.title||"Unknown title"),q.length>=3){if(n.vote_average){const o=n.vote_average.toFixed(1),r=n.vote_count??0;q[0].innerHTML=`
          <span class="popup-pill">${o}</span>
          <span class="popup-pill-sep">/</span>
          <span class="popup-pill">${r}</span>
        `}else q[0].textContent="N/A";q[1].textContent=n.popularity?n.popularity.toFixed(1):"N/A",q[2].textContent=(t=n.genres)!=null&&t.length?n.genres.map(o=>o.name).join(", "):"Unknown"}if(ie&&(ie.textContent=n.overview||"No description available."),k){const o=Te(n.id);k.textContent=o?"Remove from my library":"Add to my library",k.classList.toggle("is-remove",o),k.onclick=()=>ut(n)}}catch(n){console.error("Movie details error:",n)}finally{K.classList.add("is-hidden")}}}function Q(){_&&_.classList.remove("is-active")}function Ie(){return JSON.parse(localStorage.getItem(Be))||[]}function Te(e){return Ie().some(t=>t.id===e)}function ut(e){if(!k)return;let t=Ie();Te(e.id)?(t=t.filter(n=>n.id!==e.id),k.textContent="Add to my library",k.classList.remove("is-remove")):(t.push(e),k.textContent="Remove from my library",k.classList.add("is-remove")),localStorage.setItem(Be,JSON.stringify(t))}document.addEventListener("DOMContentLoaded",dt);typeof window<"u"&&(window.openMoviePopup=Y);const pt="https://image.tmdb.org/t/p/original",h=e=>document.getElementById(e);async function mt(){bt();try{const e=await je();if(e&&e.length>0){const t=e[Math.floor(Math.random()*e.length)];ft(t)}else ve()}catch{ve()}finally{wt()}}function ft(e){const t=h("hero"),n=h("hero-title"),o=h("hero-description"),r=h("watch-trailer"),i=h("more-details"),a=h("hero-rating");t&&(t.classList.remove("hero-default"),t.style.backgroundImage=`url(${pt}${e.backdrop_path})`),n&&(n.innerText=e.title),o&&(o.innerText=e.overview.slice(0,150)+"..."),r&&(r.onclick=()=>ht(e.id)),i&&(i.onclick=()=>{typeof Y=="function"?Y(e.id):typeof window<"u"&&typeof window.openMoviePopup=="function"?window.openMoviePopup(e.id):console.log("Details modal is not ready.")}),a&&(a.innerHTML=yt(e.vote_average))}function yt(e){const t=Number(e);if(!Number.isFinite(t))return"";const n=t/2,o=Math.floor(n),r=n%1>=.3,i=5-o-(r?1:0);let a="";for(let d=0;d<o;d++)a+='<span class="star-item star-filled"></span>';r&&(a+='<span class="star-item star-half"></span>');for(let d=0;d<i;d++)a+='<span class="star-item star-empty"></span>';return a}async function ht(e){try{const o=(await(await fetch(`${B}/movie/${e}/videos?api_key=${$}&language=en-US`)).json()).results.find(r=>r.type==="Trailer"&&r.site==="YouTube");o?gt(o.key):ge()}catch(t){console.error("Fragman yüklenirken hata oluştu:",t),ge()}}function ge(){const e=h("error-popup");e&&e.classList.add("show")}function gt(e){const t=h("video-modal"),n=h("trailer-video");t&&n&&(n.src=`https://www.youtube.com/embed/${e}?autoplay=1`,t.classList.add("show"))}function vt(){const e=h("video-modal"),t=h("error-popup"),n=h("trailer-video"),o=document.querySelector(".close-video");o&&e&&n&&(o.onclick=()=>{e.classList.remove("show"),n.src=""});const r=document.querySelector("#error-popup .close-btn");r&&t&&(r.onclick=()=>{t.classList.remove("show")}),document.addEventListener("keydown",i=>{i.key==="Escape"&&(e&&n&&(e.classList.remove("show"),n.src=""),t&&t.classList.remove("show"))}),window.onclick=i=>{i.target===e&&(e.classList.remove("show"),n.src=""),i.target===t&&t.classList.remove("show")}}function ve(){const e=h("hero"),t=h("hero-title"),n=h("hero-description"),o=h("hero-rating"),r=document.querySelector(".hero-buttons");e&&(e.classList.add("hero-default"),e.style.backgroundImage="url(/src/assets/default-cover.png)"),t&&(t.innerText="Let's Make Your Own Cinema"),n&&(n.innerText="Is a guide to creating a personalized movie theater experience. You'll need a projector, screen, and speakers. Decorate your space, choose your films, and stock up on snacks for the full experience."),o&&(o.innerHTML=""),r&&(r.innerHTML='<a class="btn btn-orange" href="/catalog.html">Get Started</a>')}function bt(){const e=document.querySelector(".hero-content");if(!e||e.querySelector(".app-loader"))return;const t=ct("Loading...");t.id="hero-loader",e.prepend(t)}function wt(){const e=document.getElementById("hero-loader");e&&e.remove()}async function Lt(){vt(),await mt()}const N=document.querySelector(".library-list"),T=document.querySelector(".load-more-btn"),kt=document.querySelector(".library-empty"),be=document.querySelector(".library-controls"),C=document.getElementById("genreBtn"),E=document.getElementById("genreMenu"),we=document.getElementById("genreText"),ae=document.querySelector(".library-loader"),V=document.querySelector(".library-error"),Et=9;let ce=1,x=[],U=[];function Mt(){V&&V.classList.remove("hidden")}function St(){V&&V.classList.add("hidden")}function _t(e){var r,i;let t=[];Array.isArray(e.genres)&&e.genres.length&&(t=e.genres.map(a=>a.name));const n=t.length>0?t.slice(0,2).join(", "):"Unknown",o=t.length>0?t[0].toLowerCase():"unknown";return{...e,year:((r=e.release_date)==null?void 0:r.slice(0,4))||e.year||"2023",rating:e.rating||((i=e.vote_average)==null?void 0:i.toFixed(1))||"7.0",genre:n,_genreKey:o}}function $t(e){const t=Number(e)/2,n=Math.round(t),o=5-n;let r="";for(let i=0;i<n;i++)r+='<img class="star" src="/assets/star-icon-filled.svg" alt="star" />';for(let i=0;i<o;i++)r+='<img class="star" src="/assets/star-icon.svg" alt="star" />';return r}const Bt="my-library";function It(){return JSON.parse(localStorage.getItem(Bt))||[]}function Tt(e){const t=$t(e.rating);return`
    <li class="library-movie-card" data-id="${e.id}">
      <div class="card-poster">
        <img
          src="https://image.tmdb.org/t/p/w500${e.poster_path}"
          alt="${e.title}"
        />

        <div class="card-overlay">
          <h3 class="movie-title">${e.title.toUpperCase()}</h3>

          <div class="card-bottom">
            <p class="movie-meta">
              ${e.genre} | ${e.year||"2024"}
            </p>

            <div class="movie-rating">
              ${t}
            </div>
          </div>
        </div>
      </div>
    </li>
  `}function Ct(e){N.innerHTML=e.map(Tt).join("")}function xt(){return x.slice(0,ce*Et)}function Pt(e){const t=e.length===0;kt.classList.toggle("hidden",!t),N.classList.toggle("hidden",t),be&&be.classList.remove("hidden"),T&&T.classList.toggle("hidden",t)}function de(){const e=xt();Ct(e),Pt(x),T&&(e.length<x.length?T.classList.remove("hidden"):T.classList.add("hidden"))}T&&T.addEventListener("click",()=>{ce++,de()});C&&E&&C.addEventListener("click",()=>{E.classList.toggle("open"),C.classList.toggle("active")});function qt(){At(),St();try{setTimeout(()=>{U=It().map(_t),x=[...U],Nt(U),de(),Le()},800)}catch(e){console.error(e),Le(),Mt()}}function At(){ae&&(ae.classList.remove("hidden"),N.classList.add("hidden"))}function Le(){ae.classList.add("hidden"),N.classList.remove("hidden")}function Ht(){document.querySelector(".library-section")&&qt()}function Nt(e){if(!E)return;const t=new Map;e.forEach(n=>{!n.genre||n.genre==="Unknown"||n.genre.split(",").forEach(o=>{const r=o.trim(),i=r.toLowerCase();t.has(i)||t.set(i,r)})}),E.innerHTML=`
    <li data-genre="all" class="active">All Genres</li>
  `,t.forEach((n,o)=>{E.innerHTML+=`
      <li data-genre="${o}">${n}</li>
    `}),Rt()}function Rt(){if(!E||!we||!C)return;const e=E.querySelectorAll("li");e.forEach(t=>{t.addEventListener("click",()=>{const n=t.dataset.genre;e.forEach(o=>o.classList.remove("active")),t.classList.add("active"),E.classList.remove("open"),C.classList.remove("active"),we.textContent=t.textContent,n==="all"?x=[...U]:x=U.filter(o=>o.genre.toLowerCase().includes(n)),ce=1,de()})})}document.addEventListener("click",e=>{!E||!C||e.target.closest(".genre-select")||(E.classList.remove("open"),C.classList.remove("active"))});function Dt(e){Ut(e==null?void 0:e.id)}function Ut(e){return e?typeof window.openMoviePopup=="function"?(window.openMoviePopup(e),!0):(console.warn("openMoviePopup bulunamadı. Popup modülü sayfaya yüklenmemiş olabilir."),!1):!1}N&&N.addEventListener("click",e=>{const t=e.target.closest(".library-movie-card");if(!t)return;const n=t.dataset.id,o=x.find(r=>String(r.id)===n);o&&Dt(o)});function Ft(){}const Yt="https://image.tmdb.org/t/p/original",Ce="../img/library-hero-image.jpg",H=document.querySelector(".my-library-hero__loader");function zt(){H==null||H.classList.remove("is-hidden")}function Gt(){H==null||H.classList.add("is-hidden")}function se(){const e=document.getElementById("my-library-error-popup");e&&e.classList.add("show")}function Z(){const e=document.getElementById("my-library-error-popup");e&&e.classList.remove("show")}function jt(){const e=localStorage.getItem("theme")||"dark";document.body.classList.remove("dark-theme","light-theme"),document.body.classList.add(`${e}-theme`)}function Ot(e){const t=document.getElementById("my-library-video-modal"),n=document.getElementById("my-library-trailer-video");t&&n&&(n.src=`https://www.youtube.com/embed/${e}?autoplay=1`,t.classList.remove("modal-hidden"))}function Kt(e){if(typeof Ft=="function")try{const t=document.getElementById("video-modal");if(t&&!t.classList.contains("modal-hidden"))return}catch(t){console.warn("External trailer popup failed, using My Library popup:",t)}Ot(e)}function X(){const e=document.getElementById("my-library-video-modal"),t=document.getElementById("my-library-trailer-video");e&&t&&(e.classList.add("modal-hidden"),t.src="")}async function xe(){try{const e=Vt();if(e&&e.length>0){const t=Jt(e);Qt(t)}else le()}catch(e){console.error("Error initializing my library hero:",e),le()}}function Vt(){try{const e=localStorage.getItem("my-library");return e?JSON.parse(e):null}catch(e){return console.error("Error reading from localStorage:",e),null}}function Jt(e){if(!e||e.length===0)return null;const t=Math.floor(Math.random()*e.length);return e[t]}function Wt(e){const t=e/2,n=Math.floor(t),o=t%1>=.3,r=5-n-(o?1:0);let i="";for(let a=0;a<n;a++)i+='<span class="star filled">★</span>';o&&(i+='<span class="star half">★</span>');for(let a=0;a<r;a++)i+='<span class="star empty">★</span>';return i}function Qt(e){var a;if(!e){le();return}const t=document.querySelector(".my-library-hero"),n=document.querySelector(".my-library-hero__overlay");if(!t||!n){console.error("Hero elements not found!");return}const o=e.backdrop_path?`${Yt}${e.backdrop_path}`:Ce;t.style.backgroundImage=`url('${o}')`;const r=((a=e.overview)==null?void 0:a.length)>180?`${e.overview.slice(0,180)}...`:e.overview||"No description available.",i=e.vote_average?Wt(e.vote_average):"";n.innerHTML=`
    <h1 class="my-library-hero__title">${e.title}</h1>
    ${i?`<div class="my-library-hero__rating">${i}</div>`:""}
    <p class="my-library-hero__description">${r}</p>
    <div class="my-library-hero__buttons">
      <button class="my-library-hero__btn my-library-hero__btn--trailer" id="my-library-hero-trailer-btn">
        Watch trailer
      </button>
      <button class="my-library-hero__btn my-library-hero__btn--details" id="my-library-hero-details-btn">
        More details
      </button>
    </div>
  `,Zt(e.id)}function Zt(e){const t=document.getElementById("my-library-hero-details-btn"),n=document.getElementById("my-library-hero-trailer-btn");if(t){const o=t.cloneNode(!0);t.parentNode.replaceChild(o,t),o.addEventListener("click",()=>Xt(e))}if(n){const o=n.cloneNode(!0);n.parentNode.replaceChild(o,n),o.addEventListener("click",()=>en(e))}}function Xt(e){typeof Y=="function"?Y(e):typeof window.openMoviePopup=="function"?window.openMoviePopup(e):(console.error("Movie popup is not ready."),se())}async function en(e){var t;zt();try{const n=await fetch(`${B}/movie/${e}/videos?api_key=${$}&language=en-us`);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=(t=(await n.json()).results)==null?void 0:t.find(i=>i.type==="Trailer"&&i.site==="YouTube");r?Kt(r.key):se()}catch(n){console.error("Error loading trailer:",n),se()}finally{Gt()}}function le(){const e=document.querySelector(".my-library-hero"),t=document.querySelector(".my-library-hero__overlay");e&&(e.style.backgroundImage=`url('${Ce}')`),t&&(t.innerHTML=`
    <h1 class="my-library-hero__title">Create Your Dream Cinema</h1>
    <p class="my-library-hero__description">
      Is a guide to designing a personalized movie theater experience with the right equipment,
      customized decor, and favorite films.
    </p>
  `)}document.addEventListener("DOMContentLoaded",()=>{if(!document.querySelector(".my-library-hero"))return;jt(),xe();const e=document.querySelector(".my-library-error__close");e&&e.addEventListener("click",Z);const t=document.getElementById("my-library-error-popup");t&&t.addEventListener("click",r=>{r.target.id==="my-library-error-popup"&&Z()});const n=document.querySelector(".close-my-library-video");n&&n.addEventListener("click",X);const o=document.getElementById("my-library-video-modal");o&&o.addEventListener("click",r=>{r.target.id==="my-library-video-modal"&&X()}),document.addEventListener("keydown",r=>{if(r.key==="Escape"){const i=document.getElementById("my-library-error-popup");i!=null&&i.classList.contains("show")&&Z();const a=document.getElementById("my-library-video-modal");a&&!a.classList.contains("modal-hidden")&&X()}})});const tn=[{name:"Çiğdem Ergal",role:"Team Lead",image:new URL("/cinemania/assets/cigdem-CDFsF4Yh.webp",import.meta.url).href,github:"https://github.com/CigdemErgal",linkedin:"https://www.linkedin.com/in/%C3%A7i%C4%9Fdem-ergal/"},{name:"Halenur Gürel",role:"Scrum Master",image:new URL("/cinemania/assets/halenur-DoTIAj_A.webp",import.meta.url).href,github:"https://github.com/halenurgurel",linkedin:"https://www.linkedin.com/in/halenurgurel/"},{name:"Ali Hamza Çakmak",role:"Developer",image:new URL("../images/footer/ali.webp",import.meta.url).href,github:"https://github.com/MRMARUL",linkedin:"https://www.linkedin.com/in/ali-hamza-%C3%A7akmak-8112553a8/"},{name:"Aslıhan Erdal",role:"Developer",image:new URL("/cinemania/assets/aslihan-BOCxFPsO.webp",import.meta.url).href,github:"https://github.com/ERDLL0",linkedin:"https://www.linkedin.com/in/aslihan-erdal/"},{name:"Burak Gökay",role:"Developer",image:new URL("/cinemania/assets/burak-BwzLELfX.webp",import.meta.url).href,github:"https://github.com/bgokay007-tech",linkedin:"https://www.linkedin.com/in/burak-g%C3%B6kay-196b66348/"},{name:"Kerem Yıldırım",role:"Developer",image:new URL("/cinemania/assets/kerem-B31FZSud.webp",import.meta.url).href,github:"https://github.com/keremyldrm61",linkedin:"https://www.linkedin.com/in/kerem-y%C4%B1ld%C4%B1r%C4%B1m-0053a5191/"},{name:"Kutluhan Gül",role:"Developer",image:new URL("/cinemania/assets/kutluhan-Bf_P6Q0L.webp",import.meta.url).href,github:"https://github.com/kutluhangil",linkedin:"https://www.linkedin.com/in/kutluhangil/"},{name:"Nur Seda Ağgünlü",role:"Developer",image:new URL("/cinemania/assets/nurseda-DC7mgIBj.webp",import.meta.url).href,github:"https://github.com/nursedaaggunlu",linkedin:"https://www.linkedin.com/in/nur-seda-aggunlu/"},{name:"Yusuf Soylu",role:"Developer",image:new URL("/cinemania/assets/yusuf-whWyECjA.webp",import.meta.url).href,github:"https://github.com/soylu1092",linkedin:"https://www.linkedin.com/in/yusuf-soylu-525236306/"},{name:"Zehra Yazıcı",role:"Developer",image:new URL("/cinemania/assets/zehra-pTW0uimo.webp",import.meta.url).href,github:"https://github.com/zehrayazici",linkedin:"https://www.linkedin.com/in/zehrayazici/"}],ke={github:'<svg class="social-icon-svg" viewBox="0 0 24 24" style="fill: white;"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>',linkedin:'<svg class="social-icon-svg" viewBox="0 0 24 24" style="fill: white;"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>'};function nn(){const e="#footer-link",t="[data-footer-modal]",n="[data-footer-close]",o=".team-list",r=()=>document.querySelector(t),i=()=>{const m=document.querySelector(o);if(!m||m.children.length>0)return;const y=tn.map(b=>`
            <li class="team-card">
              <img
                src="${b.image}"
                alt="${b.name}"
                class="team-image"
                loading="lazy"
                width="180"
                height="180"
                onerror="this.src='https://placehold.co/180x180?text=${encodeURIComponent(b.name)}'"
              />
              <h3 class="team-name">${b.name}</h3>
              <p class="team-role">${b.role}</p>
              <div class="social-links">
                <a href="${b.github}" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="GitHub">
                  ${ke.github}
                </a>
                <a href="${b.linkedin}" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="LinkedIn">
                  ${ke.linkedin}
                </a>
              </div>
            </li>
        `).join("");m.innerHTML=y},a=m=>{const y=r();y&&(m.preventDefault(),i(),y.classList.remove("is-hidden"),document.body.style.overflow="hidden")},d=()=>{const m=r();m&&(m.classList.add("is-hidden"),document.body.style.overflow="")};document.addEventListener("click",m=>{if(m.target.closest(e)){a(m);return}if(m.target.closest(n)){d();return}const y=r();y&&m.target===y&&d()}),document.addEventListener("keydown",m=>{const y=r();m.key==="Escape"&&y&&!y.classList.contains("is-hidden")&&d()})}const j=document.querySelector(".scroll-to-top");j&&(window.addEventListener("scroll",()=>{window.scrollY>300?j.classList.add("is-visible"):j.classList.remove("is-visible")}),j.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}));document.addEventListener("DOMContentLoaded",()=>{Fe(),nn(),document.querySelector(".library-section")!==null?(xe(),Ht()):(at(),Lt(),Xe())});
//# sourceMappingURL=main-CCapyCKH.js.map
